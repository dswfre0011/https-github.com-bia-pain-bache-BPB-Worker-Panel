(function(_0x35f92f,_0xa25602){const _0x58a517=a0_0xc16b,_0x5db44b=_0x35f92f();while(!![]){try{const _0x3f425f=-parseInt(_0x58a517(0x11a))/0x1+-parseInt(_0x58a517(0x12c))/0x2*(-parseInt(_0x58a517(0xf0))/0x3)+parseInt(_0x58a517(0xe0))/0x4*(-parseInt(_0x58a517(0xf3))/0x5)+-parseInt(_0x58a517(0x121))/0x6*(parseInt(_0x58a517(0x137))/0x7)+-parseInt(_0x58a517(0x15a))/0x8+-parseInt(_0x58a517(0x15f))/0x9*(parseInt(_0x58a517(0x10e))/0xa)+parseInt(_0x58a517(0x102))/0xb*(parseInt(_0x58a517(0x14d))/0xc);if(_0x3f425f===_0xa25602)break;else _0x5db44b['push'](_0x5db44b['shift']());}catch(_0x1d5e08){_0x5db44b['push'](_0x5db44b['shift']());}}}(a0_0x16df,0x94083));const a0_0x57c181=a0_0x1831;function a0_0xc16b(_0x5c0b19,_0x183dc1){const _0x16df67=a0_0x16df();return a0_0xc16b=function(_0xc16b2a,_0x4d6cf8){_0xc16b2a=_0xc16b2a-0xcf;let _0x2367a6=_0x16df67[_0xc16b2a];return _0x2367a6;},a0_0xc16b(_0x5c0b19,_0x183dc1);}(function(_0x5f58d0,_0x9ec42f){const _0x1ed7f9=a0_0xc16b,_0x420378=a0_0x1831,_0x525b4d=_0x5f58d0();while(!![]){try{const _0x52f352=parseInt(_0x420378(0xa5))/0x1+-parseInt(_0x420378(0xe8))/0x2*(-parseInt(_0x420378(0xbd))/0x3)+parseInt(_0x420378(0x81))/0x4*(-parseInt(_0x420378(0x83))/0x5)+parseInt(_0x420378(0xac))/0x6+-parseInt(_0x420378(0xe3))/0x7*(parseInt(_0x420378(0xbe))/0x8)+parseInt(_0x420378(0xae))/0x9*(-parseInt(_0x420378(0x7b))/0xa)+parseInt(_0x420378(0xcd))/0xb;if(_0x52f352===_0x9ec42f)break;else _0x525b4d[_0x1ed7f9(0x15d)](_0x525b4d[_0x1ed7f9(0xf6)]());}catch(_0x3792a8){_0x525b4d['push'](_0x525b4d[_0x1ed7f9(0xf6)]());}}}(a0_0x19c1,0xec96a));const a0_0x172864=a0_0x4f1f;(function(_0x340cf1,_0x1f5713){const _0x10a943=a0_0xc16b,_0x2cb980=a0_0x1831,_0x248244=a0_0x4f1f,_0x22c8fa=_0x340cf1();while(!![]){try{const _0x2b920f=parseInt(_0x248244(0x14b))/0x1*(-parseInt(_0x248244(0x149))/0x2)+parseInt(_0x248244(0x11c))/0x3*(-parseInt(_0x248244(0x17a))/0x4)+-parseInt(_0x248244(0x14f))/0x5*(parseInt(_0x248244(0x11d))/0x6)+-parseInt(_0x248244(0x171))/0x7+-parseInt(_0x248244(0x111))/0x8+-parseInt(_0x248244(0x164))/0x9*(parseInt(_0x248244(0x115))/0xa)+parseInt(_0x248244(0x139))/0xb;if(_0x2b920f===_0x1f5713)break;else _0x22c8fa[_0x10a943(0x15d)](_0x22c8fa[_0x2cb980(0x85)]());}catch(_0x45cedf){_0x22c8fa[_0x2cb980(0x89)](_0x22c8fa[_0x2cb980(0x85)]());}}}(a0_0x160c,0x31a71));import{getConfigAddresses,extractWireguardParams,generateRemark,randomUpperCase,getRandomPath,isIPv6,isIPv4}from'./helpers';import{getDataset}from'../kv/handlers';import{isDomain}from'../helpers/helpers';async function buildClashDNS(_0x363b36,_0x1e3ef2,_0x46ebd5){const _0x5e180a=a0_0x1831,_0x48c0ce=a0_0x4f1f,{remoteDNS:_0x2dc7a6,localDNS:_0x164435,vlessTrojanFakeDNS:_0xb9ae39,outProxyParams:_0x3e8432,enableIPv6:_0x2fe91c,warpFakeDNS:_0x4a6921,warpEnableIPv6:_0xcd243f,bypassIran:_0x2d7147,bypassChina:_0x5ec267,bypassRussia:_0x3d63fd,customBypassRules:_0x106296,customBlockRules:_0x5a1638}=_0x363b36,_0x43f95d=_0xcd243f?[_0x48c0ce(0x18a),_0x48c0ce(0x12b),_0x48c0ce(0x187),_0x48c0ce(0x113)]:[_0x48c0ce(0x18a),_0x48c0ce(0x12b)],_0x5045bd=_0xb9ae39&&!_0x46ebd5||_0x4a6921&&_0x46ebd5,_0x220947=_0x2fe91c&&!_0x46ebd5||_0xcd243f&&_0x46ebd5,_0x5b6f98=_0x106296[_0x5e180a(0x9b)](',')[_0x48c0ce(0x129)](_0x4f41ee=>isDomain(_0x4f41ee)),_0xaf3818=_0x2d7147||_0x5ec267||_0x3d63fd,_0x38be8a=[{'rule':_0x2d7147,'geosite':'ir'},{'rule':_0x5ec267,'geosite':'cn'},{'rule':_0x3d63fd,'geosite':'ru'}],_0x517f0b={'enable':!![],'listen':_0x48c0ce(0x119),'ipv6':_0x220947,'respect-rules':!![],'use-hosts':!![],'use-system-hosts':![],'nameserver':_0x46ebd5?_0x43f95d[_0x48c0ce(0x132)](_0x489450=>_0x1e3ef2?_0x489450+_0x48c0ce(0x13d):_0x489450+_0x48c0ce(0x143)):[_0x1e3ef2?_0x2dc7a6+_0x48c0ce(0x120):_0x2dc7a6+_0x48c0ce(0x143)],'proxy-server-nameserver':[_0x164435+_0x48c0ce(0x134)]};if(_0x1e3ef2&&!_0x46ebd5){const _0x2acd58=JSON[_0x48c0ce(0x15e)](_0x3e8432)['server'];if(isDomain(_0x2acd58))_0x517f0b[_0x48c0ce(0x127)]={[_0x2acd58]:_0x1e3ef2?_0x2dc7a6+_0x48c0ce(0x120):_0x2dc7a6+_0x48c0ce(0x143)};}if(_0xaf3818){const _0x502c49=[];_0x38be8a[_0x48c0ce(0x131)](({rule:_0x3a1781,geosite:_0xe8f4f1})=>{const _0xb474b2=_0x5e180a;_0x3a1781&&_0x502c49[_0xb474b2(0x89)](_0xe8f4f1);}),_0x517f0b[_0x48c0ce(0x127)]={..._0x517f0b[_0x48c0ce(0x127)],[_0x48c0ce(0x176)+_0x502c49[_0x48c0ce(0x17e)](',')]:[_0x164435+_0x5e180a(0xa6)]};}_0x5b6f98[_0x48c0ce(0x131)](_0x2de362=>{const _0x3262cb=_0x48c0ce;_0x517f0b[_0x3262cb(0x127)]={..._0x517f0b[_0x3262cb(0x127)],['+.'+_0x2de362]:[_0x164435+_0x3262cb(0x134)]};});if(_0x5045bd)Object[_0x48c0ce(0x141)](_0x517f0b,{'enhanced-mode':_0x48c0ce(0x17c),'fake-ip-range':_0x48c0ce(0x18b),'fake-ip-filter':[_0x48c0ce(0x165)]});return _0x517f0b;}function a0_0x16df(){const _0x197bc2=['RULE-SET,','https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cn.yaml','#✅\x20Selector','nameserver-policy','wireguard','socks','15058802DRZcfi','https://raw.githubusercontent.com/Chocolate4U/Iran-clash-rules/release/nsfw.txt','ir-cidr','trojan','11NHEXIr','1046LoRqqY','parse','https://raw.githubusercontent.com/Chocolate4U/Iran-clash-rules/release/ir.txt','28455USOUTP','replace','malware','3304AaVuxF','grpc-opts','#DIRECT','http/1.1','\x20-\x20Warp\x20🇮🇷','680AmCTko','https://www.gstatic.com/generate_204','#💦\x20Warp\x20-\x20Best\x20Ping\x20🚀','💦\x20Warp\x20-\x20Best\x20Ping\x20🚀','bpb','userID','[2606:4700:4700::1111]','MATCH,✅\x20Selector','3310DYBHVl','1263056ntuUsq','any:53','https://raw.githubusercontent.com/Chocolate4U/Iran-clash-rules/release/ircidr.txt','1104030dIGdFw','2122295FovmRY','defaultHttpsPorts','127.0.0.1:9090','dialer-proxy','block','server','53664pPjHUv','42ypFPBs','proxy-','::/0','?ed=','/128','hostName','put','name','bestWarpInterval','random','56030rodjHQ','1042160JqoEFo','https://raw.githubusercontent.com/Chocolate4U/Iran-clash-rules/release/malware.txt','dns','Sec-WebSocket-Protocol','10750644UybXWu','match','20EMwJpG','DIRECT','\x20-\x20','time.apple.com','301QhfLah','filter','IP-CIDR','phishing','protocol','1.0.0.1','327955HEjosX','./ruleset/','yaml','ipcidr','ads','text/plain;charset=utf-8','length','14559006LqRklb','cryptominers','reality','proxy-groups','\x20:\x20','cn-cidr','5615496rrJSvK','http-opts','5uGfDce','33110268CWQuhI','198.18.0.1/16','socks5','ws-opts','317JQEsFa','proxies','💦\x20','rules','log','rule-set:','💦\x20Best\x20Ping\x20💥','text','#proxy-1','6827936nuObhk','txt','💦\x20WoW\x20-\x20Best\x20Ping\x20🚀','push','private','5463pePoJK','no-store,\x20no-cache,\x20must-revalidate,\x20proxy-revalidate','652638onTaun','An\x20error\x20occured\x20while\x20parsing\x20chain\x20proxy:\x20','map','proxySettings','\x20-\x20WoW\x20🌍','includes','[2606:4700:4700::1001]','AND,((NETWORK,udp),(DST-PORT,443)),REJECT',',no-resolve','http','split','💦\x20Chain\x20Best\x20Ping\x20💥','https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/private.yaml','2800492pUAygf','https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip','70336BkdilH','interval','VLESS','application/octet-stream','775860hqkhlb','grpc','rule-providers','1.1.1.1','https://raw.githubusercontent.com/Chocolate4U/Iran-clash-rules/release/phishing.txt','0.0.0.0:1053','✅\x20Selector','fake-ip','IP-CIDR6','DOMAIN-SUFFIX,','no-store','0.0.0.0/0','5139qYPHgw','2krntFM','direct','ru-cidr','87yspMYs','hosts','mixed','15kIWUMa','vless','https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.yaml','shift','forEach'];a0_0x16df=function(){return _0x197bc2;};return a0_0x16df();}function buildClashRoutingRules(_0x135722){const _0x45dab3=a0_0xc16b,_0x435f0b=a0_0x1831,_0x10503c=a0_0x4f1f,{bypassLAN:_0x3041a0,bypassIran:_0x4a46e7,bypassChina:_0x27e658,bypassRussia:_0x132ef2,blockAds:_0x4340c0,blockPorn:_0x2a3349,blockUDP443:_0x1c266c,customBypassRules:_0x5c62b8,customBlockRules:_0x3a3d0b}=_0x135722,_0x30efab=_0x5c62b8?_0x5c62b8[_0x10503c(0x18e)](','):[],_0x5d6e4d=_0x3a3d0b?_0x3a3d0b[_0x10503c(0x18e)](','):[],_0x1ccc49=[{'rule':_0x3041a0,'type':_0x10503c(0x188),'noResolve':!![],'ruleProvider':{'format':_0x10503c(0x186),'geosite':_0x10503c(0x15d),'geoip':'private-cidr','geositeURL':_0x435f0b(0x8c),'geoipURL':_0x10503c(0x12d)}},{'rule':_0x4a46e7,'type':_0x435f0b(0x9e),'ruleProvider':{'format':_0x45dab3(0x158),'geosite':'ir','geoip':_0x10503c(0x17d),'geositeURL':_0x10503c(0x12a),'geoipURL':_0x10503c(0x117)}},{'rule':_0x27e658,'type':_0x435f0b(0x9e),'ruleProvider':{'format':_0x435f0b(0x79),'geosite':'cn','geoip':_0x435f0b(0xeb),'geositeURL':_0x10503c(0x13f),'geoipURL':_0x10503c(0x124)}},{'rule':_0x132ef2,'type':_0x435f0b(0x9e),'ruleProvider':{'format':_0x10503c(0x186),'geosite':'ru','geoip':_0x10503c(0x15b),'geositeURL':_0x10503c(0x166),'geoipURL':_0x10503c(0x12e)}},{'rule':!![],'type':_0x10503c(0x147),'ruleProvider':{'format':_0x10503c(0x148),'geosite':_0x435f0b(0xe9),'geositeURL':_0x10503c(0x167)}},{'rule':!![],'type':_0x10503c(0x147),'ruleProvider':{'format':_0x10503c(0x148),'geosite':_0x435f0b(0xe5),'geositeURL':_0x10503c(0x13a)}},{'rule':!![],'type':_0x10503c(0x147),'ruleProvider':{'format':_0x10503c(0x148),'geosite':_0x10503c(0x114),'geositeURL':_0x10503c(0x146)}},{'rule':_0x4340c0,'type':_0x10503c(0x147),'ruleProvider':{'format':_0x435f0b(0xc5),'geosite':_0x10503c(0x122),'geositeURL':_0x10503c(0x145)}},{'rule':_0x2a3349,'type':_0x10503c(0x147),'ruleProvider':{'format':_0x10503c(0x148),'geosite':_0x435f0b(0xf2),'geositeURL':_0x435f0b(0xe7)}}];function _0x5b2d3d(_0x4d2949,_0x2e3567,_0x3dae1c,_0x7e6671){const _0xcf3cd8=_0x45dab3,_0x2b0b13=_0x435f0b,_0x37df10=_0x10503c,_0x1e3e3b=_0x2e3567===_0x2b0b13(0xc5)?_0xcf3cd8(0x15b):_0x2e3567;return{[_0x4d2949]:{'type':_0x37df10(0x138),'format':_0x2e3567,'behavior':_0x3dae1c,'url':_0x7e6671,'path':_0x37df10(0x135)+_0x4d2949+'.'+_0x1e3e3b,'interval':0x15180}};}const _0x324dc9=[],_0x27073b=[],_0x3b65ce=[],_0x50ed6e=[],_0x2c7107={};_0x1ccc49[_0x10503c(0x131)](({rule:_0x4ac8ca,type:_0x197d02,ruleProvider:_0xbc8847,noResolve:_0x438d57})=>{const _0x2d9d4f=_0x45dab3,_0x5a0448=_0x435f0b,_0x58e502=_0x10503c,{geosite:_0x18c4aa,geoip:_0x5e8ff8,geositeURL:_0x44e13f,geoipURL:_0x2b19f3,format:_0x134cb5}=_0xbc8847;if(_0x4ac8ca){if(_0x18c4aa){const _0x5475bd=_0x197d02===_0x2d9d4f(0xee)?_0x324dc9:_0x3b65ce;_0x5475bd[_0x58e502(0x15c)](_0x5a0448(0x82)+_0x18c4aa+','+(_0x197d02===_0x58e502(0x188)?_0x5a0448(0xa8):_0x58e502(0x144)));const _0x2e22e6=_0x5b2d3d(_0x18c4aa,_0x134cb5,_0x58e502(0x152),_0x44e13f);Object[_0x58e502(0x141)](_0x2c7107,_0x2e22e6);}if(_0x5e8ff8){const _0x2b6e04=_0x197d02===_0x58e502(0x188)?_0x27073b:_0x50ed6e;_0x2b6e04[_0x58e502(0x15c)](_0x58e502(0x17f)+_0x5e8ff8+','+(_0x197d02===_0x58e502(0x188)?_0x58e502(0x183):_0x58e502(0x144))+(_0x438d57?_0x58e502(0x112):''));const _0x214a8a=_0x5b2d3d(_0x5e8ff8,_0x134cb5,_0x58e502(0x12f),_0x2b19f3);Object[_0x58e502(0x141)](_0x2c7107,_0x214a8a);}}});const _0x5356c5=(_0x2e0bc2,_0x34f030)=>{const _0x487bea=_0x435f0b,_0x5f2080=_0x10503c;if(isDomain(_0x2e0bc2))return _0x5f2080(0x157)+_0x2e0bc2+','+_0x34f030;else{const _0x360d64=isIPv4(_0x2e0bc2)?_0x5f2080(0x159):_0x5f2080(0x13b),_0x5c75a7=isIPv6(_0x2e0bc2)?_0x2e0bc2[_0x5f2080(0x16b)](/\[|\]/g,''):_0x2e0bc2,_0x117009=_0x2e0bc2[_0x487bea(0xba)]('/')?'':isIPv4(_0x2e0bc2)?_0x5f2080(0x16f):_0x5f2080(0x181);return _0x360d64+','+_0x5c75a7+_0x117009+','+_0x34f030+_0x5f2080(0x112);}};[..._0x30efab,..._0x5d6e4d][_0x10503c(0x131)]((_0x59ea82,_0x4ec746)=>{const _0x5e136f=_0x435f0b,_0x54bad0=_0x10503c,_0x5c97cb=_0x4ec746<_0x30efab[_0x54bad0(0x16d)],_0x3f61d1=_0x5c97cb?_0x54bad0(0x183):_0x54bad0(0x144),_0x408def=_0x5c97cb?isDomain(_0x59ea82)?_0x324dc9:_0x27073b:isDomain(_0x59ea82)?_0x3b65ce:_0x50ed6e;_0x408def[_0x5e136f(0x89)](_0x5356c5(_0x59ea82,_0x3f61d1));});const _0x2d542e=[..._0x324dc9,..._0x27073b,..._0x3b65ce,..._0x50ed6e];return _0x1c266c&&_0x2d542e[_0x435f0b(0x89)](_0x10503c(0x173)),_0x2d542e[_0x10503c(0x15c)](_0x10503c(0x158)),{'rules':_0x2d542e,'ruleProviders':_0x2c7107};}function a0_0x19c1(){const _0x4cfdfb=a0_0xc16b,_0x353ec7=['split',_0x4cfdfb(0xd9),_0x4cfdfb(0x112),_0x4cfdfb(0xee),_0x4cfdfb(0xea),'keep-alive',_0x4cfdfb(0xf5),'stringify',_0x4cfdfb(0xe2),_0x4cfdfb(0x107),_0x4cfdfb(0x117),_0x4cfdfb(0x10b),_0x4cfdfb(0x126),_0x4cfdfb(0x134),_0x4cfdfb(0x14b),_0x4cfdfb(0x12f),_0x4cfdfb(0xe9),_0x4cfdfb(0x131),_0x4cfdfb(0x12a),_0x4cfdfb(0x14a),_0x4cfdfb(0x152),'GET',_0x4cfdfb(0x157),_0x4cfdfb(0x127),_0x4cfdfb(0x147),_0x4cfdfb(0x132),_0x4cfdfb(0x141),_0x4cfdfb(0xf7),_0x4cfdfb(0x13b),_0x4cfdfb(0xd6),_0x4cfdfb(0x12b),_0x4cfdfb(0xd2),_0x4cfdfb(0xef),'12lbcrGq',_0x4cfdfb(0x161),_0x4cfdfb(0x109),_0x4cfdfb(0xdb),'rule',_0x4cfdfb(0x105),'tls',_0x4cfdfb(0xf2),_0x4cfdfb(0x12d),_0x4cfdfb(0x158),_0x4cfdfb(0xd5),_0x4cfdfb(0x11f),_0x4cfdfb(0x11c),_0x4cfdfb(0x120),_0x4cfdfb(0x11e),_0x4cfdfb(0x155),_0x4cfdfb(0x10d),_0x4cfdfb(0x144),_0x4cfdfb(0x115),_0x4cfdfb(0x114),_0x4cfdfb(0xfa),_0x4cfdfb(0x14e),_0x4cfdfb(0xdf),_0x4cfdfb(0xd4),_0x4cfdfb(0x150),_0x4cfdfb(0x128),_0x4cfdfb(0x13e),_0x4cfdfb(0xf4),_0x4cfdfb(0xeb),_0x4cfdfb(0xe1),_0x4cfdfb(0xd3),_0x4cfdfb(0x14f),'domain',_0x4cfdfb(0x113),_0x4cfdfb(0x142),_0x4cfdfb(0xfe),_0x4cfdfb(0x159),_0x4cfdfb(0xdd),_0x4cfdfb(0x153),_0x4cfdfb(0x106),'Trojan',_0x4cfdfb(0x13a),_0x4cfdfb(0xe4),_0x4cfdfb(0xff),_0x4cfdfb(0xed),_0x4cfdfb(0x108),_0x4cfdfb(0xdc),_0x4cfdfb(0x149),'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/ru.yaml',_0x4cfdfb(0x145),_0x4cfdfb(0x104),_0x4cfdfb(0x151),_0x4cfdfb(0x140),_0x4cfdfb(0x156),'nsfw',_0x4cfdfb(0xe5),_0x4cfdfb(0xe6),_0x4cfdfb(0x129),_0x4cfdfb(0x13f),'url-test',_0x4cfdfb(0x133),_0x4cfdfb(0xd0),_0x4cfdfb(0x124),_0x4cfdfb(0x11d),_0x4cfdfb(0x136),'select',_0x4cfdfb(0xda),_0x4cfdfb(0xf8),_0x4cfdfb(0x14c),'Sec-WebSocket-Protocol','shift',_0x4cfdfb(0xcf),'staticIPs',_0x4cfdfb(0xe3),_0x4cfdfb(0x15d),'warning',_0x4cfdfb(0x125),'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/private.yaml','assign',_0x4cfdfb(0x146),'/tr','trojanPassword',_0x4cfdfb(0x101),_0x4cfdfb(0xde),_0x4cfdfb(0x122),_0x4cfdfb(0xec),_0x4cfdfb(0xd8),_0x4cfdfb(0x118),_0x4cfdfb(0x100),_0x4cfdfb(0xe7),_0x4cfdfb(0x123),_0x4cfdfb(0x139)];return a0_0x19c1=function(){return _0x353ec7;},a0_0x19c1();}function buildClashVLESSOutbound(_0x2368c2,_0x50f3e9,_0x2dd5bb,_0x4b6a7b,_0x249540,_0x4296d9,_0x5a0fbc){const _0x3eb7c5=a0_0xc16b,_0x5e215d=a0_0x1831,_0x2057a6=a0_0x4f1f,_0x59d86b=globalThis[_0x2057a6(0x150)][_0x5e215d(0xba)](_0x2dd5bb)?!![]:![],_0x292021=isIPv6(_0x50f3e9)?_0x50f3e9[_0x3eb7c5(0x107)](/\[|\]/g,''):_0x50f3e9,_0x4a0c59={'name':_0x2368c2,'type':_0x2057a6(0x14e),'server':_0x292021,'port':+_0x2dd5bb,'uuid':globalThis[_0x2057a6(0x153)],'tls':_0x59d86b,'network':'ws','udp':!![],'ws-opts':{'path':_0x4296d9,'headers':{'host':_0x4b6a7b},'max-early-data':0xa00,'early-data-header-name':_0x2057a6(0x18d)}};return _0x59d86b&&Object['assign'](_0x4a0c59,{'servername':_0x249540,'alpn':['h2','http/1.1'],'client-fingerprint':_0x5e215d(0xb9),'skip-cert-verify':_0x5a0fbc}),_0x4a0c59;}function buildClashTrojanOutbound(_0x4de967,_0x2e73ff,_0x53b88d,_0x186543,_0x3e2be3,_0x50c8fd,_0x19bdef){const _0x1fee76=a0_0x1831,_0x403c47=a0_0x4f1f,_0x4373f4=isIPv6(_0x2e73ff)?_0x2e73ff[_0x403c47(0x16b)](/\[|\]/g,''):_0x2e73ff;return{'name':_0x4de967,'type':_0x1fee76(0x91),'server':_0x4373f4,'port':+_0x53b88d,'password':globalThis[_0x403c47(0x118)],'network':'ws','udp':!![],'ws-opts':{'path':_0x50c8fd,'headers':{'host':_0x186543},'max-early-data':0xa00,'early-data-header-name':_0x1fee76(0x84)},'sni':_0x3e2be3,'alpn':['h2',_0x403c47(0x137)],'client-fingerprint':_0x403c47(0x161),'skip-cert-verify':_0x19bdef};}function buildClashWarpOutbound(_0xce7ebb,_0x23e504,_0x26dbbb,_0x3c2c13){const _0x172b3f=a0_0xc16b,_0x4fe570=a0_0x1831,_0x3fc241=a0_0x4f1f,_0x3aa18f=/\[(.*?)\]/,_0x18aef1=/[^:]*$/,_0x1700f2=_0x26dbbb[_0x3fc241(0x123)]('[')?_0x26dbbb[_0x4fe570(0xb4)](_0x3aa18f)[0x1]:_0x26dbbb[_0x172b3f(0xd7)](':')[0x0],_0x3b64b9=_0x26dbbb[_0x3fc241(0x123)]('[')?+_0x26dbbb[_0x3fc241(0x185)](_0x18aef1)[0x0]:+_0x26dbbb[_0x3fc241(0x18e)](':')[0x1],{warpIPv6:_0x419dde,reserved:_0x425d29,publicKey:_0x35039d,privateKey:_0x5eb7d3}=extractWireguardParams(_0xce7ebb,_0x3c2c13);return{'name':_0x23e504,'type':_0x172b3f(0xfc),'ip':_0x3fc241(0x154),'ipv6':_0x419dde,'private-key':_0x5eb7d3,'server':_0x1700f2,'port':_0x3b64b9,'public-key':_0x35039d,'allowed-ips':[_0x4fe570(0xd8),_0x3fc241(0x14c)],'reserved':_0x425d29,'udp':!![],'mtu':0x500,'dialer-proxy':_0x3c2c13};}function buildClashChainOutbound(_0x19bd2f){const _0x144b7a=a0_0xc16b,_0x25a6c2=a0_0x1831,_0x4b0438=a0_0x4f1f;if(['socks',_0x4b0438(0x138)][_0x4b0438(0x123)](_0x19bd2f[_0x25a6c2(0xb7)])){const {protocol:_0x5819f9,server:_0x364282,port:_0x1e6f65,user:_0x225d37,pass:_0xbdcfa}=_0x19bd2f,_0x29af60=_0x5819f9===_0x4b0438(0x140)?_0x4b0438(0x126):_0x5819f9;return{'name':'','type':_0x29af60,'server':_0x364282,'port':+_0x1e6f65,'dialer-proxy':'','username':_0x225d37,'password':_0xbdcfa};}const {server:_0x18b611,port:_0x3d46c1,uuid:_0x181b7b,flow:_0x94423c,security:_0x5b5a05,type:_0x5d5892,sni:_0xb4ce1f,fp:_0x1d4de3,alpn:_0xc740d,pbk:_0x3878dd,sid:_0x3c43d6,headerType:_0x3924fb,host:_0x2434fc,path:_0x2c7da3,serviceName:_0x545ad5}=_0x19bd2f,_0x145025={'name':_0x4b0438(0x16a),'type':_0x4b0438(0x14e),'server':_0x18b611,'port':+_0x3d46c1,'udp':!![],'uuid':_0x181b7b,'flow':_0x94423c,'network':_0x5d5892,'dialer-proxy':_0x25a6c2(0xb1)};if(_0x5b5a05===_0x4b0438(0x15f)){const _0x3fffab=_0xc740d?_0xc740d?.[_0x25a6c2(0x9b)](','):[];Object[_0x25a6c2(0x8d)](_0x145025,{'tls':!![],'servername':_0xb4ce1f,'alpn':_0x3fffab,'client-fingerprint':_0x1d4de3});}if(_0x5b5a05===_0x4b0438(0x175))Object[_0x4b0438(0x141)](_0x145025,{'tls':!![],'servername':_0xb4ce1f,'client-fingerprint':_0x1d4de3,'reality-opts':{'public-key':_0x3878dd,'short-id':_0x3c43d6}});if(_0x3924fb===_0x4b0438(0x138)){const _0x10ecaf=_0x2c7da3?.[_0x4b0438(0x18e)](',');_0x145025[_0x4b0438(0x155)]={'method':_0x4b0438(0x160),'path':_0x10ecaf,'headers':{'Connection':[_0x4b0438(0x151)],'Content-Type':[_0x4b0438(0x12c)]}};}if(_0x5d5892==='ws'){const _0x39448d=_0x2c7da3?.[_0x25a6c2(0x9b)](_0x144b7a(0x125))[0x0],_0x249d88=+_0x2c7da3?.[_0x4b0438(0x18e)](_0x4b0438(0x130))[0x1];_0x145025[_0x4b0438(0x162)]={'path':_0x39448d,'headers':{'Host':_0x2434fc},'max-early-data':_0x249d88,'early-data-header-name':_0x4b0438(0x18d)};}if(_0x5d5892===_0x4b0438(0x11f))_0x145025[_0x144b7a(0x10a)]={'grpc-service-name':_0x545ad5};return _0x145025;}function a0_0x160c(){const _0x2cb040=a0_0xc16b,_0x1ef121=a0_0x1831,_0x2177c0=[_0x2cb040(0x12e),_0x1ef121(0x96),_0x1ef121(0xe4),_0x1ef121(0x95),_0x1ef121(0xa4),_0x1ef121(0xe1),_0x2cb040(0x143),_0x1ef121(0xc9),'/32',_0x1ef121(0xa3),_0x2cb040(0x11b),_0x1ef121(0x87),_0x1ef121(0xd3),_0x2cb040(0x160),_0x1ef121(0x8e),_0x1ef121(0xf1),_0x2cb040(0xf1),_0x2cb040(0xd1),_0x2cb040(0x135),_0x1ef121(0xea),_0x2cb040(0x162),_0x1ef121(0x98),_0x1ef121(0x97),'join','RULE-SET,',_0x2cb040(0x10f),_0x1ef121(0xa7),_0x2cb040(0x15c),_0x1ef121(0xa8),_0x1ef121(0xad),_0x1ef121(0xb4),_0x2cb040(0x13f),_0x1ef121(0xcf),_0x1ef121(0x9e),_0x1ef121(0xbf),_0x1ef121(0x88),_0x1ef121(0xd1),_0x2cb040(0x142),_0x2cb040(0x130),_0x2cb040(0xd7),_0x1ef121(0x78),_0x1ef121(0xc4),_0x1ef121(0xc6),_0x1ef121(0xda),_0x1ef121(0xed),_0x2cb040(0x116),_0x1ef121(0xca),_0x2cb040(0x119),_0x1ef121(0x90),_0x1ef121(0xf3),_0x1ef121(0xcb),_0x1ef121(0xb3),_0x1ef121(0x93),_0x1ef121(0xbc),_0x1ef121(0x7a),_0x1ef121(0xd9),_0x1ef121(0xe0),_0x2cb040(0x111),_0x1ef121(0xb5),_0x1ef121(0xba),_0x2cb040(0xf9),_0x1ef121(0x7e),_0x1ef121(0xdb),_0x2cb040(0xfb),_0x1ef121(0x7f),_0x2cb040(0x138),_0x1ef121(0xc1),_0x2cb040(0x13c),_0x1ef121(0xd2),_0x1ef121(0x9c),_0x1ef121(0xec),_0x1ef121(0xf0),_0x1ef121(0x8b),_0x1ef121(0xb6),_0x1ef121(0x86),_0x1ef121(0x99),_0x1ef121(0xa6),_0x1ef121(0xd6),_0x2cb040(0xea),_0x2cb040(0x10c),_0x1ef121(0xb8),_0x1ef121(0xdf),_0x1ef121(0xe6),_0x2cb040(0xe8),_0x1ef121(0xe2),_0x2cb040(0x110),_0x1ef121(0xaf),_0x1ef121(0xa1),_0x2cb040(0xfd),_0x1ef121(0x8d),_0x1ef121(0xc3),_0x1ef121(0xd0),'REJECT','https://raw.githubusercontent.com/Chocolate4U/Iran-clash-rules/release/ads.txt','https://raw.githubusercontent.com/Chocolate4U/Iran-clash-rules/release/cryptominers.txt',_0x1ef121(0xc7),_0x1ef121(0xc5),_0x2cb040(0x103),_0x2cb040(0x154),_0x1ef121(0xef),_0x1ef121(0x7d),_0x1ef121(0xb2),_0x1ef121(0xd7),_0x2cb040(0x13d),_0x1ef121(0xc8),_0x1ef121(0xa0),_0x1ef121(0xdc),_0x1ef121(0xdd),'172.16.0.2/32',_0x1ef121(0xa9),_0x1ef121(0x8f),_0x1ef121(0xab),_0x1ef121(0xce),_0x1ef121(0x9a),_0x1ef121(0xa2),_0x1ef121(0xbb),_0x1ef121(0x89),_0x2cb040(0x15e),_0x1ef121(0xee),_0x1ef121(0xc2),_0x1ef121(0xb0),'random',_0x1ef121(0xd4),_0x2cb040(0x12f),_0x1ef121(0x94),'geosite:private','https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/category-ru.yaml'];return a0_0x160c=function(){return _0x2177c0;},a0_0x160c();}export async function getClashWarpConfig(_0x224ca8,_0x8388ad){const _0x34c3c2=a0_0x1831,_0xa848f0=a0_0x4f1f,{proxySettings:_0x6c644,warpConfigs:_0x1aec03}=await getDataset(_0x224ca8,_0x8388ad),{warpEndpoints:_0x3891d2}=_0x6c644,_0x31ffa8=structuredClone(clashConfigTemp);_0x31ffa8[_0xa848f0(0x163)]=await buildClashDNS(_0x6c644,!![],!![]);const {rules:_0x596728,ruleProviders:_0x2f385b}=buildClashRoutingRules(_0x6c644);_0x31ffa8[_0xa848f0(0x14a)]=_0x596728,_0x31ffa8[_0xa848f0(0x170)]=_0x2f385b;const _0x422919=_0x31ffa8[_0xa848f0(0x11b)][0x0],_0x23f879=_0x31ffa8[_0xa848f0(0x11b)][0x1];_0x422919[_0xa848f0(0x13e)]=['💦\x20Warp\x20-\x20Best\x20Ping\x20🚀',_0xa848f0(0x182)],_0x23f879[_0x34c3c2(0x78)]=_0xa848f0(0x121),_0x23f879[_0xa848f0(0x16c)]=+_0x6c644[_0xa848f0(0x184)],_0x31ffa8[_0x34c3c2(0xb3)][_0xa848f0(0x15c)](structuredClone(_0x23f879));const _0x258d67=_0x31ffa8[_0xa848f0(0x11b)][0x2];_0x258d67[_0xa848f0(0x110)]=_0xa848f0(0x182);let _0x6889d6=[],_0x47a51a=[];return _0x3891d2[_0xa848f0(0x18e)](',')[_0xa848f0(0x131)]((_0x36b245,_0x9ab442)=>{const _0x4c0a2e=_0x34c3c2,_0x43136b=_0xa848f0,_0x30dac=_0x43136b(0x13c)+(_0x9ab442+0x1)+_0x4c0a2e(0xcc),_0x496919=_0x43136b(0x13c)+(_0x9ab442+0x1)+_0x43136b(0x178),_0x38d4ea=buildClashWarpOutbound(_0x1aec03,_0x30dac,_0x36b245,''),_0xe327bb=buildClashWarpOutbound(_0x1aec03,_0x496919,_0x36b245,_0x30dac);_0x31ffa8[_0x43136b(0x13e)][_0x43136b(0x15c)](_0xe327bb,_0x38d4ea),_0x6889d6[_0x43136b(0x15c)](_0x30dac),_0x47a51a[_0x43136b(0x15c)](_0x496919),_0x23f879[_0x43136b(0x13e)][_0x43136b(0x15c)](_0x30dac),_0x258d67[_0x4c0a2e(0xaf)][_0x43136b(0x15c)](_0x496919);}),_0x422919[_0xa848f0(0x13e)][_0xa848f0(0x15c)](..._0x6889d6,..._0x47a51a),new Response(JSON[_0xa848f0(0x15a)](_0x31ffa8,null,0x4),{'status':0xc8,'headers':{'Content-Type':_0xa848f0(0x18c),'Cache-Control':_0xa848f0(0x174),'CDN-Cache-Control':_0xa848f0(0x136)}});}function a0_0x4f1f(_0x50e4f2,_0x4506a0){const _0x5a1559=a0_0x160c();return a0_0x4f1f=function(_0x447cec,_0x1e64c9){_0x447cec=_0x447cec-0x110;let _0xa30074=_0x5a1559[_0x447cec];return _0xa30074;},a0_0x4f1f(_0x50e4f2,_0x4506a0);}export async function getClashNormalConfig(_0x59c7c9,_0x154d60){const _0x26dce9=a0_0xc16b,_0x235e25=a0_0x1831,_0x54f765=a0_0x4f1f,{proxySettings:_0x7f1a7e}=await getDataset(_0x59c7c9,_0x154d60);let _0x575a1a;const {resolvedRemoteDNS:_0x4364e6,cleanIPs:_0x571160,proxyIP:_0xa603bd,ports:_0x11d5d4,vlessConfigs:_0x46d1ed,trojanConfigs:_0x510509,outProxy:_0x37b915,outProxyParams:_0x465621,customCdnAddrs:_0x1fed65,customCdnHost:_0x17681e,customCdnSni:_0x15d1c2,bestVLESSTrojanInterval:_0x3fb02e,enableIPv6:_0x10c913}=_0x7f1a7e;if(_0x37b915){const _0x2eb5a8=JSON[_0x54f765(0x15e)](_0x465621);try{_0x575a1a=buildClashChainOutbound(_0x2eb5a8);}catch(_0xb29dfe){console[_0x54f765(0x11a)](_0x54f765(0x17b),_0xb29dfe),_0x575a1a=undefined,await _0x154d60[_0x235e25(0x9d)][_0x235e25(0xd5)](_0x235e25(0x7c),JSON[_0x54f765(0x15a)]({..._0x7f1a7e,'outProxy':'','outProxyParams':{}}));}}const _0x4d56a9=structuredClone(clashConfigTemp);_0x4364e6[_0x54f765(0x16e)]?_0x4d56a9[_0x26dce9(0xf1)]={[_0x4364e6[_0x54f765(0x16e)]]:_0x4364e6[_0x54f765(0x172)]}:delete _0x4d56a9[_0x54f765(0x177)];const {rules:_0x4c2f53,ruleProviders:_0x12613f}=buildClashRoutingRules(_0x7f1a7e);_0x4d56a9[_0x235e25(0xaa)]=await buildClashDNS(_0x7f1a7e,_0x575a1a,![]),_0x4d56a9[_0x54f765(0x14a)]=_0x4c2f53,_0x4d56a9[_0x54f765(0x170)]=_0x12613f;const _0x24b6ee=_0x4d56a9[_0x54f765(0x11b)][0x0],_0x2dd1e5=_0x4d56a9[_0x54f765(0x11b)][0x1];_0x24b6ee[_0x54f765(0x13e)]=[_0x235e25(0xb1)],_0x2dd1e5[_0x54f765(0x110)]='💦\x20Best\x20Ping\x20💥',_0x2dd1e5[_0x54f765(0x16c)]=+_0x3fb02e;const _0x5ba70b=await getConfigAddresses(_0x571160,_0x10c913),_0x7387d4=_0x1fed65?_0x1fed65[_0x54f765(0x18e)](','):[],_0x3506b2=[..._0x5ba70b,..._0x7387d4];let _0x20a616=0x1,_0x5b514d;const _0x224918=[..._0x46d1ed?[_0x235e25(0x92)]:[],..._0x510509?[_0x54f765(0x169)]:[]];return _0x224918[_0x54f765(0x131)](_0x3f20d7=>{const _0x32b697=_0x54f765;let _0xe510d1=0x1;_0x11d5d4[_0x32b697(0x131)](_0x5b3a0d=>{const _0x1d8800=_0x32b697;_0x3506b2[_0x1d8800(0x131)](_0x2c9619=>{const _0x120fd5=a0_0xc16b,_0x3477c8=a0_0x1831,_0x3a71d5=_0x1d8800;let _0x5df8b7,_0x127915;const _0x452366=_0x7387d4[_0x3477c8(0xba)](_0x2c9619),_0x3b6605=_0x452366?'C':'',_0xb6add6=_0x452366?_0x15d1c2:randomUpperCase(globalThis[_0x3a71d5(0x14d)]),_0x238ecc=_0x452366?_0x17681e:globalThis[_0x3a71d5(0x14d)],_0x44bfc2=generateRemark(_0xe510d1,_0x5b3a0d,_0x2c9619,_0x571160,_0x3f20d7,_0x3b6605)[_0x3a71d5(0x16b)](_0x120fd5(0x148),_0x3a71d5(0x179));_0x3f20d7===_0x3477c8(0x92)&&(_0x5b514d='/'+getRandomPath(0x10)+(_0xa603bd?'/'+btoa(_0xa603bd):''),_0x5df8b7=buildClashVLESSOutbound(_0x575a1a?_0x3a71d5(0x133)+_0x20a616:_0x44bfc2,_0x2c9619,_0x5b3a0d,_0x238ecc,_0xb6add6,_0x5b514d,_0x452366),_0x4d56a9[_0x3a71d5(0x13e)][_0x120fd5(0x15d)](_0x5df8b7),_0x24b6ee[_0x3a71d5(0x13e)][_0x3a71d5(0x15c)](_0x44bfc2),_0x2dd1e5[_0x3a71d5(0x13e)][_0x3a71d5(0x15c)](_0x44bfc2)),_0x3f20d7===_0x3a71d5(0x169)&&globalThis[_0x3a71d5(0x150)][_0x3a71d5(0x123)](_0x5b3a0d)&&(_0x5b514d=_0x3a71d5(0x156)+getRandomPath(0x10)+(_0xa603bd?'/'+btoa(_0xa603bd):''),_0x127915=buildClashTrojanOutbound(_0x575a1a?_0x3a71d5(0x133)+_0x20a616:_0x44bfc2,_0x2c9619,_0x5b3a0d,_0x238ecc,_0xb6add6,_0x5b514d,_0x452366),_0x4d56a9[_0x3a71d5(0x13e)][_0x3a71d5(0x15c)](_0x127915),_0x24b6ee[_0x3a71d5(0x13e)][_0x3a71d5(0x15c)](_0x44bfc2),_0x2dd1e5[_0x3a71d5(0x13e)][_0x3a71d5(0x15c)](_0x44bfc2));if(_0x575a1a){let _0x189f0d=structuredClone(_0x575a1a);_0x189f0d[_0x3a71d5(0x110)]=_0x44bfc2,_0x189f0d[_0x3a71d5(0x116)]=_0x3477c8(0x99)+_0x20a616,_0x4d56a9[_0x3477c8(0xaf)][_0x120fd5(0x15d)](_0x189f0d);}_0x20a616++,_0xe510d1++;});});}),new Response(JSON[_0x235e25(0xa2)](_0x4d56a9,null,0x4),{'status':0xc8,'headers':{'Content-Type':_0x235e25(0xde),'Cache-Control':_0x54f765(0x174),'CDN-Cache-Control':_0x235e25(0x9f)}});}function a0_0x1831(_0x1575df,_0x3773ad){const _0x3a5fc6=a0_0x19c1();return a0_0x1831=function(_0x40faea,_0x50433a){_0x40faea=_0x40faea-0x77;let _0x5810b8=_0x3a5fc6[_0x40faea];return _0x5810b8;},a0_0x1831(_0x1575df,_0x3773ad);}const clashConfigTemp={'mixed-port':0x1ed2,'ipv6':!![],'allow-lan':!![],'mode':a0_0x57c181(0xc0),'log-level':a0_0x57c181(0x8a),'disable-keep-alive':![],'keep-alive-idle':0x1e,'keep-alive-interval':0x1e,'unified-delay':![],'geo-auto-update':!![],'geo-update-interval':0xa8,'external-controller':a0_0x172864(0x125),'external-ui-url':a0_0x172864(0x189),'external-ui':'ui','external-controller-cors':{'allow-origins':['*'],'allow-private-network':!![]},'profile':{'store-selected':!![],'store-fake-ip':!![]},'hosts':{},'dns':{},'tun':{'enable':!![],'stack':a0_0x172864(0x142),'auto-route':!![],'strict-route':!![],'auto-detect-interface':!![],'dns-hijack':[a0_0x172864(0x168)],'mtu':0x2328},'sniffer':{'enable':!![],'force-dns-mapping':!![],'parse-pure-ip':!![],'override-destination':![],'sniff':{'HTTP':{'ports':[0x50,0x1f90,0x22b0,0x804,0x822,0x826,0x82f]},'TLS':{'ports':[0x1bb,0x20fb,0x805,0x823,0x827,0x830]}}},'proxies':[],'proxy-groups':[{'name':a0_0x57c181(0x77),'type':a0_0x57c181(0x80),'proxies':[]},{'name':'','type':a0_0x172864(0x11e),'url':a0_0x172864(0x180),'interval':0x1e,'tolerance':0x32,'proxies':[]}],'rule-providers':{},'rules':[],'ntp':{'enable':!![],'server':a0_0x172864(0x128),'port':0x7b,'interval':0x1e}};