const a0_0x57c181=a0_0x1831;(function(_0x4a8ef5,_0x45bc8e){const _0x2b44ab=a0_0x1831,_0x4a59e4=_0x4a8ef5();while(!![]){try{const _0x20b1cd=parseInt(_0x2b44ab(0xa5))/0x1+-parseInt(_0x2b44ab(0xe8))/0x2*(-parseInt(_0x2b44ab(0xbd))/0x3)+parseInt(_0x2b44ab(0x81))/0x4*(-parseInt(_0x2b44ab(0x83))/0x5)+parseInt(_0x2b44ab(0xac))/0x6+-parseInt(_0x2b44ab(0xe3))/0x7*(parseInt(_0x2b44ab(0xbe))/0x8)+parseInt(_0x2b44ab(0xae))/0x9*(-parseInt(_0x2b44ab(0x7b))/0xa)+parseInt(_0x2b44ab(0xcd))/0xb;if(_0x20b1cd===_0x45bc8e)break;else _0x4a59e4['push'](_0x4a59e4['shift']());}catch(_0x971396){_0x4a59e4['push'](_0x4a59e4['shift']());}}}(a0_0x19c1,0xec96a));const a0_0x172864=a0_0x4f1f;(function(_0xe386b1,_0x13ab9a){const _0x1012a4=a0_0x1831,_0x34c032=a0_0x4f1f,_0x11c444=_0xe386b1();while(!![]){try{const _0xa7777c=parseInt(_0x34c032(0x14b))/0x1*(-parseInt(_0x34c032(0x149))/0x2)+parseInt(_0x34c032(0x11c))/0x3*(-parseInt(_0x34c032(0x17a))/0x4)+-parseInt(_0x34c032(0x14f))/0x5*(parseInt(_0x34c032(0x11d))/0x6)+-parseInt(_0x34c032(0x171))/0x7+-parseInt(_0x34c032(0x111))/0x8+-parseInt(_0x34c032(0x164))/0x9*(parseInt(_0x34c032(0x115))/0xa)+parseInt(_0x34c032(0x139))/0xb;if(_0xa7777c===_0x13ab9a)break;else _0x11c444['push'](_0x11c444[_0x1012a4(0x85)]());}catch(_0x2d5dd0){_0x11c444[_0x1012a4(0x89)](_0x11c444[_0x1012a4(0x85)]());}}}(a0_0x160c,0x31a71));import{getConfigAddresses,extractWireguardParams,generateRemark,randomUpperCase,getRandomPath,isIPv6,isIPv4}from'./helpers';import{getDataset}from'../kv/handlers';import{isDomain}from'../helpers/helpers';async function buildClashDNS(_0x58b24c,_0xe0ffc7,_0x58eb23){const _0xa56530=a0_0x1831,_0x4a4703=a0_0x4f1f,{remoteDNS:_0x31d9e8,localDNS:_0xfb34cd,vlessTrojanFakeDNS:_0x2e9904,outProxyParams:_0x18ba2b,enableIPv6:_0x3dc20b,warpFakeDNS:_0x5667ab,warpEnableIPv6:_0x16c16b,bypassIran:_0x2572b6,bypassChina:_0x2e53a9,bypassRussia:_0x5ad08d,customBypassRules:_0x35ab12,customBlockRules:_0x5df727}=_0x58b24c,_0x42a03d=_0x16c16b?[_0x4a4703(0x18a),_0x4a4703(0x12b),_0x4a4703(0x187),_0x4a4703(0x113)]:[_0x4a4703(0x18a),_0x4a4703(0x12b)],_0x56edcd=_0x2e9904&&!_0x58eb23||_0x5667ab&&_0x58eb23,_0x241fb3=_0x3dc20b&&!_0x58eb23||_0x16c16b&&_0x58eb23,_0x117b95=_0x35ab12[_0xa56530(0x9b)](',')[_0x4a4703(0x129)](_0x4a7861=>isDomain(_0x4a7861)),_0x134fba=_0x2572b6||_0x2e53a9||_0x5ad08d,_0x219e68=[{'rule':_0x2572b6,'geosite':'ir'},{'rule':_0x2e53a9,'geosite':'cn'},{'rule':_0x5ad08d,'geosite':'ru'}],_0x290454={'enable':!![],'listen':_0x4a4703(0x119),'ipv6':_0x241fb3,'respect-rules':!![],'use-hosts':!![],'use-system-hosts':![],'nameserver':_0x58eb23?_0x42a03d[_0x4a4703(0x132)](_0xad2a8e=>_0xe0ffc7?_0xad2a8e+_0x4a4703(0x13d):_0xad2a8e+_0x4a4703(0x143)):[_0xe0ffc7?_0x31d9e8+_0x4a4703(0x120):_0x31d9e8+_0x4a4703(0x143)],'proxy-server-nameserver':[_0xfb34cd+_0x4a4703(0x134)]};if(_0xe0ffc7&&!_0x58eb23){const _0x2d38a6=JSON[_0x4a4703(0x15e)](_0x18ba2b)['server'];if(isDomain(_0x2d38a6))_0x290454[_0x4a4703(0x127)]={[_0x2d38a6]:_0xe0ffc7?_0x31d9e8+_0x4a4703(0x120):_0x31d9e8+_0x4a4703(0x143)};}if(_0x134fba){const _0x59ef1e=[];_0x219e68[_0x4a4703(0x131)](({rule:_0x12f0be,geosite:_0x4dba0d})=>{const _0x133668=_0xa56530;_0x12f0be&&_0x59ef1e[_0x133668(0x89)](_0x4dba0d);}),_0x290454[_0x4a4703(0x127)]={..._0x290454[_0x4a4703(0x127)],[_0x4a4703(0x176)+_0x59ef1e[_0x4a4703(0x17e)](',')]:[_0xfb34cd+_0xa56530(0xa6)]};}_0x117b95[_0x4a4703(0x131)](_0x22870b=>{const _0x8b5942=_0x4a4703;_0x290454[_0x8b5942(0x127)]={..._0x290454[_0x8b5942(0x127)],['+.'+_0x22870b]:[_0xfb34cd+_0x8b5942(0x134)]};});if(_0x56edcd)Object[_0x4a4703(0x141)](_0x290454,{'enhanced-mode':_0x4a4703(0x17c),'fake-ip-range':_0x4a4703(0x18b),'fake-ip-filter':[_0x4a4703(0x165)]});return _0x290454;}function buildClashRoutingRules(_0x3bd4ba){const _0x1db386=a0_0x1831,_0xa26ca1=a0_0x4f1f,{bypassLAN:_0x50b5c9,bypassIran:_0x164a93,bypassChina:_0x53f2c1,bypassRussia:_0x3c43a2,blockAds:_0x4da6bf,blockPorn:_0x4a1e0a,blockUDP443:_0x47e531,customBypassRules:_0x2d422d,customBlockRules:_0x2b7988}=_0x3bd4ba,_0x500bcd=_0x2d422d?_0x2d422d[_0xa26ca1(0x18e)](','):[],_0x4307fb=_0x2b7988?_0x2b7988[_0xa26ca1(0x18e)](','):[],_0x2ba281=[{'rule':_0x50b5c9,'type':_0xa26ca1(0x188),'noResolve':!![],'ruleProvider':{'format':_0xa26ca1(0x186),'geosite':_0xa26ca1(0x15d),'geoip':'private-cidr','geositeURL':_0x1db386(0x8c),'geoipURL':_0xa26ca1(0x12d)}},{'rule':_0x164a93,'type':_0x1db386(0x9e),'ruleProvider':{'format':'text','geosite':'ir','geoip':_0xa26ca1(0x17d),'geositeURL':_0xa26ca1(0x12a),'geoipURL':_0xa26ca1(0x117)}},{'rule':_0x53f2c1,'type':_0x1db386(0x9e),'ruleProvider':{'format':_0x1db386(0x79),'geosite':'cn','geoip':_0x1db386(0xeb),'geositeURL':_0xa26ca1(0x13f),'geoipURL':_0xa26ca1(0x124)}},{'rule':_0x3c43a2,'type':_0x1db386(0x9e),'ruleProvider':{'format':_0xa26ca1(0x186),'geosite':'ru','geoip':_0xa26ca1(0x15b),'geositeURL':_0xa26ca1(0x166),'geoipURL':_0xa26ca1(0x12e)}},{'rule':!![],'type':_0xa26ca1(0x147),'ruleProvider':{'format':_0xa26ca1(0x148),'geosite':_0x1db386(0xe9),'geositeURL':_0xa26ca1(0x167)}},{'rule':!![],'type':_0xa26ca1(0x147),'ruleProvider':{'format':_0xa26ca1(0x148),'geosite':_0x1db386(0xe5),'geositeURL':_0xa26ca1(0x13a)}},{'rule':!![],'type':_0xa26ca1(0x147),'ruleProvider':{'format':_0xa26ca1(0x148),'geosite':_0xa26ca1(0x114),'geositeURL':_0xa26ca1(0x146)}},{'rule':_0x4da6bf,'type':_0xa26ca1(0x147),'ruleProvider':{'format':_0x1db386(0xc5),'geosite':_0xa26ca1(0x122),'geositeURL':_0xa26ca1(0x145)}},{'rule':_0x4a1e0a,'type':_0xa26ca1(0x147),'ruleProvider':{'format':_0xa26ca1(0x148),'geosite':_0x1db386(0xf2),'geositeURL':_0x1db386(0xe7)}}];function _0x396b7a(_0x191190,_0x5b72b4,_0x3254d9,_0x12d668){const _0x490e4d=_0x1db386,_0x320437=_0xa26ca1,_0x2df32e=_0x5b72b4===_0x490e4d(0xc5)?'txt':_0x5b72b4;return{[_0x191190]:{'type':_0x320437(0x138),'format':_0x5b72b4,'behavior':_0x3254d9,'url':_0x12d668,'path':_0x320437(0x135)+_0x191190+'.'+_0x2df32e,'interval':0x15180}};}const _0x552336=[],_0x2e433e=[],_0xafaf9b=[],_0x5c80fd=[],_0x1ce420={};_0x2ba281[_0xa26ca1(0x131)](({rule:_0x5e8cb4,type:_0x4968df,ruleProvider:_0x3e0630,noResolve:_0x1f2598})=>{const _0x16b196=_0x1db386,_0x3ea9c6=_0xa26ca1,{geosite:_0xfd42a5,geoip:_0x5bbafd,geositeURL:_0x3350d8,geoipURL:_0x2dc89f,format:_0x3b1093}=_0x3e0630;if(_0x5e8cb4){if(_0xfd42a5){const _0xd0b8df=_0x4968df==='direct'?_0x552336:_0xafaf9b;_0xd0b8df[_0x3ea9c6(0x15c)](_0x16b196(0x82)+_0xfd42a5+','+(_0x4968df===_0x3ea9c6(0x188)?_0x16b196(0xa8):_0x3ea9c6(0x144)));const _0x3d24b1=_0x396b7a(_0xfd42a5,_0x3b1093,_0x3ea9c6(0x152),_0x3350d8);Object[_0x3ea9c6(0x141)](_0x1ce420,_0x3d24b1);}if(_0x5bbafd){const _0x3c9b81=_0x4968df===_0x3ea9c6(0x188)?_0x2e433e:_0x5c80fd;_0x3c9b81[_0x3ea9c6(0x15c)](_0x3ea9c6(0x17f)+_0x5bbafd+','+(_0x4968df===_0x3ea9c6(0x188)?_0x3ea9c6(0x183):_0x3ea9c6(0x144))+(_0x1f2598?_0x3ea9c6(0x112):''));const _0x277be6=_0x396b7a(_0x5bbafd,_0x3b1093,_0x3ea9c6(0x12f),_0x2dc89f);Object[_0x3ea9c6(0x141)](_0x1ce420,_0x277be6);}}});const _0x33ec3c=(_0x17ec6c,_0x243a9b)=>{const _0x32e9c2=_0x1db386,_0x1b7160=_0xa26ca1;if(isDomain(_0x17ec6c))return _0x1b7160(0x157)+_0x17ec6c+','+_0x243a9b;else{const _0x422340=isIPv4(_0x17ec6c)?_0x1b7160(0x159):_0x1b7160(0x13b),_0x4aeac1=isIPv6(_0x17ec6c)?_0x17ec6c[_0x1b7160(0x16b)](/\[|\]/g,''):_0x17ec6c,_0x4b489b=_0x17ec6c[_0x32e9c2(0xba)]('/')?'':isIPv4(_0x17ec6c)?_0x1b7160(0x16f):_0x1b7160(0x181);return _0x422340+','+_0x4aeac1+_0x4b489b+','+_0x243a9b+_0x1b7160(0x112);}};[..._0x500bcd,..._0x4307fb][_0xa26ca1(0x131)]((_0x12120e,_0x43e5c3)=>{const _0x70d45b=_0x1db386,_0x343180=_0xa26ca1,_0x2c60b3=_0x43e5c3<_0x500bcd[_0x343180(0x16d)],_0x6cccc5=_0x2c60b3?_0x343180(0x183):_0x343180(0x144),_0x390288=_0x2c60b3?isDomain(_0x12120e)?_0x552336:_0x2e433e:isDomain(_0x12120e)?_0xafaf9b:_0x5c80fd;_0x390288[_0x70d45b(0x89)](_0x33ec3c(_0x12120e,_0x6cccc5));});const _0x4e7028=[..._0x552336,..._0x2e433e,..._0xafaf9b,..._0x5c80fd];return _0x47e531&&_0x4e7028[_0x1db386(0x89)](_0xa26ca1(0x173)),_0x4e7028[_0xa26ca1(0x15c)](_0xa26ca1(0x158)),{'rules':_0x4e7028,'ruleProviders':_0x1ce420};}function a0_0x19c1(){const _0x14bfb5=['split','https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/private.yaml','bpb','direct','no-store','keep-alive','https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.yaml','stringify','rule-providers','replace','1263056ntuUsq','#DIRECT','/128','DIRECT','http-opts','dns','DOMAIN-SUFFIX,','10750644UybXWu','bestWarpInterval','5615496rrJSvK','proxies','GET','ðŸ’¦\x20Best\x20Ping\x20ðŸ’¥','hostName','proxy-groups','match','ads','forEach','protocol','http','random','includes','ru-cidr','12lbcrGq','652638onTaun','3304AaVuxF','https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip','rule','https://raw.githubusercontent.com/Chocolate4U/Iran-clash-rules/release/ir.txt','tls','mixed','1042160JqoEFo','text',',no-resolve','block','defaultHttpsPorts','server','dialer-proxy','log','\x20-\x20Warp\x20ðŸ‡®ðŸ‡·','14559006LqRklb','MATCH,âœ…\x20Selector','[2606:4700:4700::1111]','#âœ…\x20Selector','198.18.0.1/16','application/octet-stream','AND,((NETWORK,udp),(DST-PORT,443)),REJECT','ws-opts','put','./ruleset/','vless','0.0.0.0/0','grpc','[2606:4700:4700::1001]','socks5','domain','userID','text/plain;charset=utf-8','15058802DRZcfi','#proxy-1','interval','ðŸ’¦\x20','28455USOUTP','Trojan','phishing','https://raw.githubusercontent.com/Chocolate4U/Iran-clash-rules/release/phishing.txt','https://raw.githubusercontent.com/Chocolate4U/Iran-clash-rules/release/nsfw.txt','2krntFM','malware','70336BkdilH','cn-cidr','https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/ru.yaml','cryptominers','parse','317JQEsFa','ipcidr','rule-set:','nsfw','0.0.0.0:1053','âœ…\x20Selector','name','yaml','url-test','20EMwJpG','proxySettings','::/0','127.0.0.1:9090','time.apple.com','select','2800492pUAygf','RULE-SET,','5uGfDce','Sec-WebSocket-Protocol','shift','map','staticIPs','1.1.1.1','push','warning','?ed=','https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/private.yaml','assign','reality','/tr','trojanPassword','trojan','VLESS','42ypFPBs','5139qYPHgw','ðŸ’¦\x20Chain\x20Best\x20Ping\x20ðŸ’¥','any:53','ir-cidr','fake-ip','proxy-','IP-CIDR'];a0_0x19c1=function(){return _0x14bfb5;};return a0_0x19c1();}function buildClashVLESSOutbound(_0x5e2e55,_0x15dcf0,_0x6705d2,_0x580ddb,_0x44358c,_0x58d864,_0x3e3303){const _0x44d0e3=a0_0x1831,_0x345dde=a0_0x4f1f,_0x42a7d3=globalThis[_0x345dde(0x150)][_0x44d0e3(0xba)](_0x6705d2)?!![]:![],_0x2e214d=isIPv6(_0x15dcf0)?_0x15dcf0['replace'](/\[|\]/g,''):_0x15dcf0,_0xbac954={'name':_0x5e2e55,'type':_0x345dde(0x14e),'server':_0x2e214d,'port':+_0x6705d2,'uuid':globalThis[_0x345dde(0x153)],'tls':_0x42a7d3,'network':'ws','udp':!![],'ws-opts':{'path':_0x58d864,'headers':{'host':_0x580ddb},'max-early-data':0xa00,'early-data-header-name':_0x345dde(0x18d)}};return _0x42a7d3&&Object['assign'](_0xbac954,{'servername':_0x44358c,'alpn':['h2','http/1.1'],'client-fingerprint':_0x44d0e3(0xb9),'skip-cert-verify':_0x3e3303}),_0xbac954;}function buildClashTrojanOutbound(_0x553d90,_0x3619bf,_0x51abfe,_0xe15436,_0x39b939,_0x312f89,_0x12ffaf){const _0x19822f=a0_0x1831,_0x39a7ee=a0_0x4f1f,_0x4738a2=isIPv6(_0x3619bf)?_0x3619bf[_0x39a7ee(0x16b)](/\[|\]/g,''):_0x3619bf;return{'name':_0x553d90,'type':_0x19822f(0x91),'server':_0x4738a2,'port':+_0x51abfe,'password':globalThis[_0x39a7ee(0x118)],'network':'ws','udp':!![],'ws-opts':{'path':_0x312f89,'headers':{'host':_0xe15436},'max-early-data':0xa00,'early-data-header-name':_0x19822f(0x84)},'sni':_0x39b939,'alpn':['h2',_0x39a7ee(0x137)],'client-fingerprint':_0x39a7ee(0x161),'skip-cert-verify':_0x12ffaf};}function buildClashWarpOutbound(_0xa6aec5,_0x3fd240,_0xb26c19,_0x1949dc){const _0x1baec7=a0_0x1831,_0x38b32b=a0_0x4f1f,_0xb16f=/\[(.*?)\]/,_0x2028cf=/[^:]*$/,_0x1d7609=_0xb26c19[_0x38b32b(0x123)]('[')?_0xb26c19[_0x1baec7(0xb4)](_0xb16f)[0x1]:_0xb26c19['split'](':')[0x0],_0x40d6ad=_0xb26c19[_0x38b32b(0x123)]('[')?+_0xb26c19[_0x38b32b(0x185)](_0x2028cf)[0x0]:+_0xb26c19[_0x38b32b(0x18e)](':')[0x1],{warpIPv6:_0x402207,reserved:_0x195a31,publicKey:_0x3105ae,privateKey:_0x5580da}=extractWireguardParams(_0xa6aec5,_0x1949dc);return{'name':_0x3fd240,'type':'wireguard','ip':_0x38b32b(0x154),'ipv6':_0x402207,'private-key':_0x5580da,'server':_0x1d7609,'port':_0x40d6ad,'public-key':_0x3105ae,'allowed-ips':[_0x1baec7(0xd8),_0x38b32b(0x14c)],'reserved':_0x195a31,'udp':!![],'mtu':0x500,'dialer-proxy':_0x1949dc};}function buildClashChainOutbound(_0x2909a5){const _0x4038aa=a0_0x1831,_0x43b90c=a0_0x4f1f;if(['socks',_0x43b90c(0x138)][_0x43b90c(0x123)](_0x2909a5[_0x4038aa(0xb7)])){const {protocol:_0x35096d,server:_0xf0df37,port:_0x17f277,user:_0x4a4908,pass:_0x490afe}=_0x2909a5,_0x5110ce=_0x35096d===_0x43b90c(0x140)?_0x43b90c(0x126):_0x35096d;return{'name':'','type':_0x5110ce,'server':_0xf0df37,'port':+_0x17f277,'dialer-proxy':'','username':_0x4a4908,'password':_0x490afe};}const {server:_0x2916da,port:_0x2c6c5f,uuid:_0x476140,flow:_0x51bd35,security:_0x475497,type:_0x116037,sni:_0x7f0043,fp:_0x344a1d,alpn:_0x5c823a,pbk:_0x38b54d,sid:_0x4aef00,headerType:_0x4f389d,host:_0x44b810,path:_0xc50368,serviceName:_0x286874}=_0x2909a5,_0x13d893={'name':_0x43b90c(0x16a),'type':_0x43b90c(0x14e),'server':_0x2916da,'port':+_0x2c6c5f,'udp':!![],'uuid':_0x476140,'flow':_0x51bd35,'network':_0x116037,'dialer-proxy':_0x4038aa(0xb1)};if(_0x475497===_0x43b90c(0x15f)){const _0x5cbaa4=_0x5c823a?_0x5c823a?.[_0x4038aa(0x9b)](','):[];Object[_0x4038aa(0x8d)](_0x13d893,{'tls':!![],'servername':_0x7f0043,'alpn':_0x5cbaa4,'client-fingerprint':_0x344a1d});}if(_0x475497===_0x43b90c(0x175))Object[_0x43b90c(0x141)](_0x13d893,{'tls':!![],'servername':_0x7f0043,'client-fingerprint':_0x344a1d,'reality-opts':{'public-key':_0x38b54d,'short-id':_0x4aef00}});if(_0x4f389d===_0x43b90c(0x138)){const _0x5ecbdc=_0xc50368?.[_0x43b90c(0x18e)](',');_0x13d893[_0x43b90c(0x155)]={'method':_0x43b90c(0x160),'path':_0x5ecbdc,'headers':{'Connection':[_0x43b90c(0x151)],'Content-Type':[_0x43b90c(0x12c)]}};}if(_0x116037==='ws'){const _0x532307=_0xc50368?.[_0x4038aa(0x9b)]('?ed=')[0x0],_0x3a54c6=+_0xc50368?.[_0x43b90c(0x18e)](_0x43b90c(0x130))[0x1];_0x13d893[_0x43b90c(0x162)]={'path':_0x532307,'headers':{'Host':_0x44b810},'max-early-data':_0x3a54c6,'early-data-header-name':_0x43b90c(0x18d)};}if(_0x116037===_0x43b90c(0x11f))_0x13d893['grpc-opts']={'grpc-service-name':_0x286874};return _0x13d893;}function a0_0x160c(){const _0x32315a=a0_0x1831,_0x27d50c=['https://raw.githubusercontent.com/Chocolate4U/Iran-clash-rules/release/malware.txt',_0x32315a(0x96),_0x32315a(0xe4),_0x32315a(0x95),_0x32315a(0xa4),_0x32315a(0xe1),'length',_0x32315a(0xc9),'/32',_0x32315a(0xa3),'2122295FovmRY',_0x32315a(0x87),_0x32315a(0xd3),'no-store,\x20no-cache,\x20must-revalidate,\x20proxy-revalidate',_0x32315a(0x8e),_0x32315a(0xf1),'hosts','\x20-\x20WoW\x20ðŸŒ','\x20-\x20',_0x32315a(0xea),'An\x20error\x20occured\x20while\x20parsing\x20chain\x20proxy:\x20',_0x32315a(0x98),_0x32315a(0x97),'join','RULE-SET,','https://www.gstatic.com/generate_204',_0x32315a(0xa7),'ðŸ’¦\x20WoW\x20-\x20Best\x20Ping\x20ðŸš€',_0x32315a(0xa8),_0x32315a(0xad),_0x32315a(0xb4),'yaml',_0x32315a(0xcf),_0x32315a(0x9e),_0x32315a(0xbf),_0x32315a(0x88),_0x32315a(0xd1),'text/plain;charset=utf-8','Sec-WebSocket-Protocol','split',_0x32315a(0x78),_0x32315a(0xc4),_0x32315a(0xc6),_0x32315a(0xda),_0x32315a(0xed),'3310DYBHVl',_0x32315a(0xca),'https://raw.githubusercontent.com/Chocolate4U/Iran-clash-rules/release/ircidr.txt',_0x32315a(0x90),_0x32315a(0xf3),_0x32315a(0xcb),_0x32315a(0xb3),_0x32315a(0x93),_0x32315a(0xbc),_0x32315a(0x7a),_0x32315a(0xd9),_0x32315a(0xe0),'ðŸ’¦\x20Warp\x20-\x20Best\x20Ping\x20ðŸš€',_0x32315a(0xb5),_0x32315a(0xba),'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cn.yaml',_0x32315a(0x7e),_0x32315a(0xdb),'nameserver-policy',_0x32315a(0x7f),'filter',_0x32315a(0xc1),'1.0.0.1',_0x32315a(0xd2),_0x32315a(0x9c),_0x32315a(0xec),_0x32315a(0xf0),_0x32315a(0x8b),_0x32315a(0xb6),_0x32315a(0x86),_0x32315a(0x99),_0x32315a(0xa6),_0x32315a(0xd6),'no-store','http/1.1',_0x32315a(0xb8),_0x32315a(0xdf),_0x32315a(0xe6),'IP-CIDR6',_0x32315a(0xe2),'#ðŸ’¦\x20Warp\x20-\x20Best\x20Ping\x20ðŸš€',_0x32315a(0xaf),_0x32315a(0xa1),'socks',_0x32315a(0x8d),_0x32315a(0xc3),_0x32315a(0xd0),'REJECT','https://raw.githubusercontent.com/Chocolate4U/Iran-clash-rules/release/ads.txt','https://raw.githubusercontent.com/Chocolate4U/Iran-clash-rules/release/cryptominers.txt',_0x32315a(0xc7),_0x32315a(0xc5),'1046LoRqqY','rules',_0x32315a(0xef),_0x32315a(0x7d),_0x32315a(0xb2),_0x32315a(0xd7),'327955HEjosX',_0x32315a(0xc8),_0x32315a(0xa0),_0x32315a(0xdc),_0x32315a(0xdd),'172.16.0.2/32',_0x32315a(0xa9),_0x32315a(0x8f),_0x32315a(0xab),_0x32315a(0xce),_0x32315a(0x9a),_0x32315a(0xa2),_0x32315a(0xbb),_0x32315a(0x89),'private',_0x32315a(0xee),_0x32315a(0xc2),_0x32315a(0xb0),'random',_0x32315a(0xd4),'dns',_0x32315a(0x94),'geosite:private','https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/category-ru.yaml'];return a0_0x160c=function(){return _0x27d50c;},a0_0x160c();}export async function getClashWarpConfig(_0x5c0a4e,_0x514bcb){const _0x5a303e=a0_0x1831,_0x56bebc=a0_0x4f1f,{proxySettings:_0x5da48b,warpConfigs:_0x42f8e4}=await getDataset(_0x5c0a4e,_0x514bcb),{warpEndpoints:_0x4e6fe9}=_0x5da48b,_0x358d00=structuredClone(clashConfigTemp);_0x358d00[_0x56bebc(0x163)]=await buildClashDNS(_0x5da48b,!![],!![]);const {rules:_0x49cef5,ruleProviders:_0x5a3d9a}=buildClashRoutingRules(_0x5da48b);_0x358d00[_0x56bebc(0x14a)]=_0x49cef5,_0x358d00[_0x56bebc(0x170)]=_0x5a3d9a;const _0x2a4f49=_0x358d00[_0x56bebc(0x11b)][0x0],_0x23191d=_0x358d00[_0x56bebc(0x11b)][0x1];_0x2a4f49[_0x56bebc(0x13e)]=['ðŸ’¦\x20Warp\x20-\x20Best\x20Ping\x20ðŸš€',_0x56bebc(0x182)],_0x23191d[_0x5a303e(0x78)]=_0x56bebc(0x121),_0x23191d[_0x56bebc(0x16c)]=+_0x5da48b[_0x56bebc(0x184)],_0x358d00[_0x5a303e(0xb3)][_0x56bebc(0x15c)](structuredClone(_0x23191d));const _0x559009=_0x358d00[_0x56bebc(0x11b)][0x2];_0x559009[_0x56bebc(0x110)]=_0x56bebc(0x182);let _0x38e987=[],_0x183378=[];return _0x4e6fe9[_0x56bebc(0x18e)](',')[_0x56bebc(0x131)]((_0x4cc5fd,_0xa6a3fd)=>{const _0xb990ea=_0x5a303e,_0x1d6b62=_0x56bebc,_0x5b81da=_0x1d6b62(0x13c)+(_0xa6a3fd+0x1)+_0xb990ea(0xcc),_0x2b538f=_0x1d6b62(0x13c)+(_0xa6a3fd+0x1)+_0x1d6b62(0x178),_0x276bbe=buildClashWarpOutbound(_0x42f8e4,_0x5b81da,_0x4cc5fd,''),_0x137e4b=buildClashWarpOutbound(_0x42f8e4,_0x2b538f,_0x4cc5fd,_0x5b81da);_0x358d00[_0x1d6b62(0x13e)][_0x1d6b62(0x15c)](_0x137e4b,_0x276bbe),_0x38e987[_0x1d6b62(0x15c)](_0x5b81da),_0x183378[_0x1d6b62(0x15c)](_0x2b538f),_0x23191d[_0x1d6b62(0x13e)][_0x1d6b62(0x15c)](_0x5b81da),_0x559009[_0xb990ea(0xaf)][_0x1d6b62(0x15c)](_0x2b538f);}),_0x2a4f49[_0x56bebc(0x13e)][_0x56bebc(0x15c)](..._0x38e987,..._0x183378),new Response(JSON[_0x56bebc(0x15a)](_0x358d00,null,0x4),{'status':0xc8,'headers':{'Content-Type':_0x56bebc(0x18c),'Cache-Control':_0x56bebc(0x174),'CDN-Cache-Control':_0x56bebc(0x136)}});}function a0_0x4f1f(_0x3d3f0c,_0x11e911){const _0x49b005=a0_0x160c();return a0_0x4f1f=function(_0x258ee0,_0x1f3ed4){_0x258ee0=_0x258ee0-0x110;let _0x9634bf=_0x49b005[_0x258ee0];return _0x9634bf;},a0_0x4f1f(_0x3d3f0c,_0x11e911);}export async function getClashNormalConfig(_0x722472,_0x1e332a){const _0x1906d3=a0_0x1831,_0x4c2a58=a0_0x4f1f,{proxySettings:_0x434e5f}=await getDataset(_0x722472,_0x1e332a);let _0x3dc7f8;const {resolvedRemoteDNS:_0x24044c,cleanIPs:_0x34a210,proxyIP:_0x1006b0,ports:_0x2cff7f,vlessConfigs:_0x4b98ff,trojanConfigs:_0x3aab31,outProxy:_0x337251,outProxyParams:_0x438185,customCdnAddrs:_0x555502,customCdnHost:_0x37a1ef,customCdnSni:_0x470c18,bestVLESSTrojanInterval:_0xdc3563,enableIPv6:_0x476c75}=_0x434e5f;if(_0x337251){const _0x539dbb=JSON[_0x4c2a58(0x15e)](_0x438185);try{_0x3dc7f8=buildClashChainOutbound(_0x539dbb);}catch(_0x51a48c){console[_0x4c2a58(0x11a)](_0x4c2a58(0x17b),_0x51a48c),_0x3dc7f8=undefined,await _0x1e332a[_0x1906d3(0x9d)][_0x1906d3(0xd5)](_0x1906d3(0x7c),JSON[_0x4c2a58(0x15a)]({..._0x434e5f,'outProxy':'','outProxyParams':{}}));}}const _0x4125b7=structuredClone(clashConfigTemp);_0x24044c[_0x4c2a58(0x16e)]?_0x4125b7['hosts']={[_0x24044c[_0x4c2a58(0x16e)]]:_0x24044c[_0x4c2a58(0x172)]}:delete _0x4125b7[_0x4c2a58(0x177)];const {rules:_0xc67e0f,ruleProviders:_0x76fd43}=buildClashRoutingRules(_0x434e5f);_0x4125b7[_0x1906d3(0xaa)]=await buildClashDNS(_0x434e5f,_0x3dc7f8,![]),_0x4125b7[_0x4c2a58(0x14a)]=_0xc67e0f,_0x4125b7[_0x4c2a58(0x170)]=_0x76fd43;const _0x396957=_0x4125b7[_0x4c2a58(0x11b)][0x0],_0xd6fc66=_0x4125b7[_0x4c2a58(0x11b)][0x1];_0x396957[_0x4c2a58(0x13e)]=[_0x1906d3(0xb1)],_0xd6fc66[_0x4c2a58(0x110)]='ðŸ’¦\x20Best\x20Ping\x20ðŸ’¥',_0xd6fc66[_0x4c2a58(0x16c)]=+_0xdc3563;const _0x5a07d3=await getConfigAddresses(_0x34a210,_0x476c75),_0x33c772=_0x555502?_0x555502[_0x4c2a58(0x18e)](','):[],_0x3fb725=[..._0x5a07d3,..._0x33c772];let _0x11d700=0x1,_0x21ad98;const _0x34fbc8=[..._0x4b98ff?[_0x1906d3(0x92)]:[],..._0x3aab31?[_0x4c2a58(0x169)]:[]];return _0x34fbc8[_0x4c2a58(0x131)](_0x24b070=>{const _0x2738bf=_0x4c2a58;let _0x557035=0x1;_0x2cff7f[_0x2738bf(0x131)](_0x152e95=>{const _0x13174a=_0x2738bf;_0x3fb725[_0x13174a(0x131)](_0x4dd04b=>{const _0x3841e2=a0_0x1831,_0xaabdc0=_0x13174a;let _0x1166b0,_0x509f76;const _0x4b60ae=_0x33c772[_0x3841e2(0xba)](_0x4dd04b),_0x1ab5f1=_0x4b60ae?'C':'',_0x2f0e6c=_0x4b60ae?_0x470c18:randomUpperCase(globalThis[_0xaabdc0(0x14d)]),_0x17e518=_0x4b60ae?_0x37a1ef:globalThis[_0xaabdc0(0x14d)],_0x1a8c6b=generateRemark(_0x557035,_0x152e95,_0x4dd04b,_0x34a210,_0x24b070,_0x1ab5f1)[_0xaabdc0(0x16b)]('\x20:\x20',_0xaabdc0(0x179));_0x24b070===_0x3841e2(0x92)&&(_0x21ad98='/'+getRandomPath(0x10)+(_0x1006b0?'/'+btoa(_0x1006b0):''),_0x1166b0=buildClashVLESSOutbound(_0x3dc7f8?_0xaabdc0(0x133)+_0x11d700:_0x1a8c6b,_0x4dd04b,_0x152e95,_0x17e518,_0x2f0e6c,_0x21ad98,_0x4b60ae),_0x4125b7[_0xaabdc0(0x13e)]['push'](_0x1166b0),_0x396957[_0xaabdc0(0x13e)][_0xaabdc0(0x15c)](_0x1a8c6b),_0xd6fc66[_0xaabdc0(0x13e)][_0xaabdc0(0x15c)](_0x1a8c6b)),_0x24b070===_0xaabdc0(0x169)&&globalThis[_0xaabdc0(0x150)][_0xaabdc0(0x123)](_0x152e95)&&(_0x21ad98=_0xaabdc0(0x156)+getRandomPath(0x10)+(_0x1006b0?'/'+btoa(_0x1006b0):''),_0x509f76=buildClashTrojanOutbound(_0x3dc7f8?_0xaabdc0(0x133)+_0x11d700:_0x1a8c6b,_0x4dd04b,_0x152e95,_0x17e518,_0x2f0e6c,_0x21ad98,_0x4b60ae),_0x4125b7[_0xaabdc0(0x13e)][_0xaabdc0(0x15c)](_0x509f76),_0x396957[_0xaabdc0(0x13e)][_0xaabdc0(0x15c)](_0x1a8c6b),_0xd6fc66[_0xaabdc0(0x13e)][_0xaabdc0(0x15c)](_0x1a8c6b));if(_0x3dc7f8){let _0x2cd9bd=structuredClone(_0x3dc7f8);_0x2cd9bd[_0xaabdc0(0x110)]=_0x1a8c6b,_0x2cd9bd[_0xaabdc0(0x116)]=_0x3841e2(0x99)+_0x11d700,_0x4125b7[_0x3841e2(0xaf)]['push'](_0x2cd9bd);}_0x11d700++,_0x557035++;});});}),new Response(JSON[_0x1906d3(0xa2)](_0x4125b7,null,0x4),{'status':0xc8,'headers':{'Content-Type':_0x1906d3(0xde),'Cache-Control':_0x4c2a58(0x174),'CDN-Cache-Control':_0x1906d3(0x9f)}});}function a0_0x1831(_0x59c355,_0x3956c9){const _0x19c1e6=a0_0x19c1();return a0_0x1831=function(_0x1831af,_0x286cd8){_0x1831af=_0x1831af-0x77;let _0x5e4815=_0x19c1e6[_0x1831af];return _0x5e4815;},a0_0x1831(_0x59c355,_0x3956c9);}const clashConfigTemp={'mixed-port':0x1ed2,'ipv6':!![],'allow-lan':!![],'mode':a0_0x57c181(0xc0),'log-level':a0_0x57c181(0x8a),'disable-keep-alive':![],'keep-alive-idle':0x1e,'keep-alive-interval':0x1e,'unified-delay':![],'geo-auto-update':!![],'geo-update-interval':0xa8,'external-controller':a0_0x172864(0x125),'external-ui-url':a0_0x172864(0x189),'external-ui':'ui','external-controller-cors':{'allow-origins':['*'],'allow-private-network':!![]},'profile':{'store-selected':!![],'store-fake-ip':!![]},'hosts':{},'dns':{},'tun':{'enable':!![],'stack':a0_0x172864(0x142),'auto-route':!![],'strict-route':!![],'auto-detect-interface':!![],'dns-hijack':[a0_0x172864(0x168)],'mtu':0x2328},'sniffer':{'enable':!![],'force-dns-mapping':!![],'parse-pure-ip':!![],'override-destination':![],'sniff':{'HTTP':{'ports':[0x50,0x1f90,0x22b0,0x804,0x822,0x826,0x82f]},'TLS':{'ports':[0x1bb,0x20fb,0x805,0x823,0x827,0x830]}}},'proxies':[],'proxy-groups':[{'name':a0_0x57c181(0x77),'type':a0_0x57c181(0x80),'proxies':[]},{'name':'','type':a0_0x172864(0x11e),'url':a0_0x172864(0x180),'interval':0x1e,'tolerance':0x32,'proxies':[]}],'rule-providers':{},'rules':[],'ntp':{'enable':!![],'server':a0_0x172864(0x128),'port':0x7b,'interval':0x1e}};