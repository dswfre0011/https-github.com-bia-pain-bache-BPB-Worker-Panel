const a0_0x230cc9=a0_0x432d;(function(_0x1aaf29,_0x4f5424){const _0x360a48=a0_0x432d,_0x44811a=_0x1aaf29();while(!![]){try{const _0x391ecf=-parseInt(_0x360a48(0x16d))/0x1*(parseInt(_0x360a48(0x143))/0x2)+-parseInt(_0x360a48(0x168))/0x3+-parseInt(_0x360a48(0x150))/0x4*(-parseInt(_0x360a48(0x165))/0x5)+-parseInt(_0x360a48(0x1b4))/0x6+parseInt(_0x360a48(0x15a))/0x7+-parseInt(_0x360a48(0x19e))/0x8*(-parseInt(_0x360a48(0x14b))/0x9)+-parseInt(_0x360a48(0x1a7))/0xa*(-parseInt(_0x360a48(0x1b3))/0xb);if(_0x391ecf===_0x4f5424)break;else _0x44811a['push'](_0x44811a['shift']());}catch(_0x52fadb){_0x44811a['push'](_0x44811a['shift']());}}}(a0_0x382a,0x4524c));function a0_0xdceb(_0x42a866,_0x4aaa9e){const _0x194e99=a0_0x428d();return a0_0xdceb=function(_0x208745,_0x58c88d){_0x208745=_0x208745-0x73;let _0xb27d26=_0x194e99[_0x208745];return _0xb27d26;},a0_0xdceb(_0x42a866,_0x4aaa9e);}const a0_0x5ee952=a0_0xdceb;(function(_0x31c56c,_0x422e7e){const _0x291573=a0_0x432d,_0x248c3c=a0_0xdceb,_0x3ae2d5=_0x31c56c();while(!![]){try{const _0x233ddf=parseInt(_0x248c3c(0xf7))/0x1+-parseInt(_0x248c3c(0x8e))/0x2*(-parseInt(_0x248c3c(0x8b))/0x3)+parseInt(_0x248c3c(0xee))/0x4+parseInt(_0x248c3c(0xd0))/0x5*(-parseInt(_0x248c3c(0xe2))/0x6)+parseInt(_0x248c3c(0xdb))/0x7+parseInt(_0x248c3c(0x76))/0x8*(parseInt(_0x248c3c(0xd1))/0x9)+-parseInt(_0x248c3c(0x8d))/0xa;if(_0x233ddf===_0x422e7e)break;else _0x3ae2d5['push'](_0x3ae2d5[_0x291573(0x1ac)]());}catch(_0x2d9298){_0x3ae2d5[_0x291573(0x158)](_0x3ae2d5[_0x291573(0x1ac)]());}}}(a0_0x428d,0x5a168));function a0_0x428d(){const _0x3375f5=a0_0x432d,_0x150b50=[_0x3375f5(0x172),_0x3375f5(0x158),'transport',_0x3375f5(0x19a),'Direct',_0x3375f5(0x147),_0x3375f5(0x13c),'VLESS',_0x3375f5(0x1a5),'45sjbUsH',_0x3375f5(0x189),'fdfe:dcba:9876::1/126',_0x3375f5(0x173),_0x3375f5(0x1a0),_0x3375f5(0x174),_0x3375f5(0x149),_0x3375f5(0x1af),_0x3375f5(0x146),_0x3375f5(0x1a1),_0x3375f5(0x175),'540512GnHZio',_0x3375f5(0x1b0),_0x3375f5(0x167),'remote',_0x3375f5(0x198),_0x3375f5(0x195),_0x3375f5(0x170),_0x3375f5(0x16a),_0x3375f5(0x13f),_0x3375f5(0x197),_0x3375f5(0x193),_0x3375f5(0x15f),_0x3375f5(0x171),_0x3375f5(0x185),_0x3375f5(0x152),'https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-category-ru.srs',_0x3375f5(0x156),_0x3375f5(0x154),'alpn','1845184PbtCQc',_0x3375f5(0x1ad),_0x3375f5(0x1bb),_0x3375f5(0x17c),_0x3375f5(0x14f),_0x3375f5(0x13a),_0x3375f5(0x13e),_0x3375f5(0x188),_0x3375f5(0x13b),_0x3375f5(0x161),_0x3375f5(0x142),_0x3375f5(0x157),_0x3375f5(0x1b7),_0x3375f5(0x18f),'💦\x20','trojanPassword',_0x3375f5(0x1ba),_0x3375f5(0x1a2),_0x3375f5(0x1b2),'geoip-phishing',_0x3375f5(0x1b9),_0x3375f5(0x15d),_0x3375f5(0x1a9),_0x3375f5(0x1a4),'https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geoip-ir.srs',_0x3375f5(0x1ae),_0x3375f5(0x1bd),_0x3375f5(0x17d),'https://www.gstatic.com/generate_204','mixed',_0x3375f5(0x191),_0x3375f5(0x19c),'dns-fake',_0x3375f5(0x17f),_0x3375f5(0x14e),_0x3375f5(0x14a),_0x3375f5(0x181),_0x3375f5(0x194),_0x3375f5(0x164),_0x3375f5(0x151),'tls',_0x3375f5(0x182),_0x3375f5(0x176),'https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geoip-phishing.srs',_0x3375f5(0x190),_0x3375f5(0x16e),_0x3375f5(0x1aa),_0x3375f5(0x196),_0x3375f5(0x1b1),'route','ip_cidr',_0x3375f5(0x1b5),_0x3375f5(0x155),'includes',_0x3375f5(0x15b),_0x3375f5(0x138),_0x3375f5(0x140),'geoip-ru',_0x3375f5(0x186),'dns-block','\x20-\x20WoW\x20🌍',_0x3375f5(0x180),_0x3375f5(0x1ab),_0x3375f5(0x166),_0x3375f5(0x178),_0x3375f5(0x187),_0x3375f5(0x1b6),_0x3375f5(0x14d),_0x3375f5(0x1bc),_0x3375f5(0x179),'grpc',_0x3375f5(0x169),'split','time.apple.com',_0x3375f5(0x141),_0x3375f5(0x183),_0x3375f5(0x19d),_0x3375f5(0x184),'https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip','tls_fragment',_0x3375f5(0x160),_0x3375f5(0x163),_0x3375f5(0x1a3),_0x3375f5(0x18a),_0x3375f5(0x153),_0x3375f5(0x1b8),'tag',_0x3375f5(0x16b),_0x3375f5(0x199),_0x3375f5(0x139),_0x3375f5(0x16f),'geoip-ir','binary',_0x3375f5(0x19b),_0x3375f5(0x18c),_0x3375f5(0x1a6),_0x3375f5(0x145),_0x3375f5(0x14c),_0x3375f5(0x148)];return a0_0x428d=function(){return _0x150b50;},a0_0x428d();}import{getConfigAddresses,extractWireguardParams,generateRemark,randomUpperCase,getRandomPath,isIPv6}from'./helpers';import{getDataset}from'../kv/handlers';import{isDomain}from'../helpers/helpers';function buildSingBoxDNS(_0x4c46ae,_0x1bb4bf,_0x1ab561,_0x2650f7){const _0xb5c887=a0_0x432d,_0x48e2ec=a0_0xdceb,{remoteDNS:_0x37844a,localDNS:_0x463402,vlessTrojanFakeDNS:_0x442e10,enableIPv6:_0x18e4d3,warpFakeDNS:_0xc02564,warpEnableIPv6:_0x4bea7e,bypassIran:_0x35ce8b,bypassChina:_0x2ae71f,bypassRussia:_0x44ffd3,blockAds:_0x410fdf,blockPorn:_0x4ac76f,customBypassRules:_0x5cf5e6,customBlockRules:_0x222e98}=_0x4c46ae;let _0x13f8e1;const _0xd23e7b=_0x442e10&&!_0x1ab561||_0xc02564&&_0x1ab561,_0x2e4e47=_0x18e4d3&&!_0x1ab561||_0x4bea7e&&_0x1ab561,_0x87a19a=_0x5cf5e6[_0x48e2ec(0xac)](',')[_0x48e2ec(0x98)](_0x2ceac2=>isDomain(_0x2ceac2)),_0x3393a2=_0x222e98[_0x48e2ec(0xac)](',')[_0x48e2ec(0x98)](_0x135877=>isDomain(_0x135877)),_0xef3022=[{'rule':_0x35ce8b,'type':_0x48e2ec(0xa9),'geosite':_0x48e2ec(0x86),'geoip':_0x48e2ec(0xbf)},{'rule':_0x2ae71f,'type':_0x48e2ec(0xa9),'geosite':_0x48e2ec(0x9e),'geoip':_0x48e2ec(0xbb)},{'rule':_0x44ffd3,'type':_0x48e2ec(0xa9),'geosite':_0x48e2ec(0xa3),'geoip':_0x48e2ec(0x9d)},{'rule':!![],'type':_0x48e2ec(0x85),'geosite':_0xb5c887(0x14d)},{'rule':!![],'type':_0xb5c887(0x17f),'geosite':_0x48e2ec(0xc1)},{'rule':!![],'type':_0x48e2ec(0x85),'geosite':_0x48e2ec(0xd4)},{'rule':_0x410fdf,'type':_0x48e2ec(0x85),'geosite':_0x48e2ec(0xf0)},{'rule':_0x4ac76f,'type':_0x48e2ec(0x85),'geosite':_0x48e2ec(0x93)}],_0x44d2a7=[{'address':_0x1ab561?_0x48e2ec(0xb1):_0x37844a,'address_resolver':_0x48e2ec(0xc3),'strategy':_0x2e4e47?_0x48e2ec(0xc4):_0xb5c887(0x1ae),'detour':_0x2650f7,'tag':_0x48e2ec(0x9c)},{'address':_0x463402,'strategy':_0x2e4e47?_0x48e2ec(0xc4):_0x48e2ec(0x7d),'detour':_0x48e2ec(0xa9),'tag':_0x48e2ec(0xc3)},{'address':_0x48e2ec(0xdc),'tag':'dns-block'}];let _0x3e56e0;if(_0x1ab561)_0x3e56e0={'outbound':_0x48e2ec(0xc7),'server':_0x48e2ec(0xc3)};else{const _0x5d49b9=_0x1bb4bf[_0x48e2ec(0x98)](_0x188ef2=>isDomain(_0x188ef2)),_0x1de96f=[...new Set(_0x5d49b9)];_0x3e56e0={'domain':_0x1de96f,'server':_0x48e2ec(0xc3)};}const _0x3f0cd7=[_0x3e56e0,{'clash_mode':_0xb5c887(0x162),'server':'dns-direct'},{'clash_mode':_0x48e2ec(0xf8),'server':_0x48e2ec(0x9c)}];let _0x34b982={'disable_cache':!![],'rule_set':[],'server':_0x48e2ec(0x9f)};_0xef3022[_0x48e2ec(0xfb)](({rule:_0x349062,type:_0x5662ae,geosite:_0x5cfa70,geoip:_0x38f91e})=>{const _0xcb2a5c=_0xb5c887,_0x4cf261=_0x48e2ec;_0x349062&&_0x5662ae===_0x4cf261(0xa9)&&_0x3f0cd7[_0x4cf261(0xc8)]({'type':_0x4cf261(0xe0),'mode':_0x4cf261(0xdd),'rules':[{'rule_set':_0x5cfa70},{'rule_set':_0x38f91e}],'server':_0xcb2a5c(0x1a6)}),_0x349062&&_0x5662ae==='block'&&_0x34b982[_0x4cf261(0xd8)][_0x4cf261(0xc8)](_0x5cfa70);}),_0x3f0cd7[_0x48e2ec(0xc8)](_0x34b982);const _0x4ceeab=_0x1f5077=>({'domain_suffix':[],'server':_0x1f5077});let _0x582733,_0x23c3fb;_0x87a19a[_0xb5c887(0x188)]&&(_0x582733=_0x4ceeab(_0x48e2ec(0xc3)),_0x87a19a[_0x48e2ec(0xfb)](_0x5c9b39=>{const _0x52eafb=_0xb5c887,_0x3fc960=_0x48e2ec;_0x582733[_0x3fc960(0xd5)][_0x52eafb(0x158)](_0x5c9b39);}),_0x3f0cd7[_0x48e2ec(0xc8)](_0x582733)),_0x3393a2[_0x48e2ec(0xf5)]&&(_0x23c3fb=_0x4ceeab(_0x48e2ec(0x9f)),_0x3393a2[_0x48e2ec(0xfb)](_0xb65f4d=>{const _0x2d9b5c=_0xb5c887;_0x23c3fb[_0x2d9b5c(0x174)][_0x2d9b5c(0x158)](_0xb65f4d);}),_0x3f0cd7[_0xb5c887(0x158)](_0x23c3fb));if(_0xd23e7b){_0x44d2a7[_0x48e2ec(0xc8)]({'address':_0x48e2ec(0xc2),'tag':_0x48e2ec(0x84)}),_0x3f0cd7[_0xb5c887(0x158)]({'disable_cache':!![],'inbound':_0x48e2ec(0x9a),'query_type':['A',_0x48e2ec(0xf6)],'server':_0x48e2ec(0x84)}),_0x13f8e1={'enabled':!![],'inet4_range':_0x48e2ec(0xdf)};if(_0x2e4e47)_0x13f8e1[_0x48e2ec(0xd3)]=_0x48e2ec(0x83);}return{'servers':_0x44d2a7,'rules':_0x3f0cd7,'fakeip':_0x13f8e1};}function buildSingBoxRoutingRules(_0x52230c){const _0x1b9b6e=a0_0x432d,_0x5bbaf3=a0_0xdceb,{bypassLAN:_0x4186ba,bypassIran:_0x4d0325,bypassChina:_0x4f1a7f,bypassRussia:_0x19c7c7,blockAds:_0x43eaf2,blockPorn:_0x1ba404,blockUDP443:_0x41ebd9,customBypassRules:_0xde9a33,customBlockRules:_0x4c2b0b}=_0x52230c,_0x6e15c5=_0xde9a33?_0xde9a33[_0x1b9b6e(0x19f)](','):[],_0x384ef6=_0x4c2b0b?_0x4c2b0b[_0x5bbaf3(0xac)](','):[],_0x7ccbd4=[{'type':_0x1b9b6e(0x195),'mode':'or','rules':[{'inbound':_0x5bbaf3(0x91)},{'network':_0x5bbaf3(0xe8),'port':0x35}],'outbound':'dns-out'},{'clash_mode':_0x5bbaf3(0xcb),'outbound':_0x5bbaf3(0xa9)},{'clash_mode':_0x5bbaf3(0xf8),'outbound':_0x5bbaf3(0xa4)}],_0x268c28=[{'rule':_0x4d0325,'type':_0x5bbaf3(0xa9),'ruleSet':{'geosite':_0x5bbaf3(0x86),'geoip':_0x5bbaf3(0xbf),'geositeURL':_0x5bbaf3(0xec),'geoipURL':_0x5bbaf3(0x7c)}},{'rule':_0x4f1a7f,'type':_0x5bbaf3(0xa9),'ruleSet':{'geosite':_0x1b9b6e(0x186),'geoip':_0x5bbaf3(0xbb),'geositeURL':_0x5bbaf3(0xf9),'geoipURL':_0x1b9b6e(0x1a8)}},{'rule':_0x19c7c7,'type':_0x1b9b6e(0x179),'ruleSet':{'geosite':_0x5bbaf3(0xa3),'geoip':_0x5bbaf3(0x9d),'geositeURL':_0x5bbaf3(0xea),'geoipURL':_0x5bbaf3(0xa2)}},{'rule':!![],'type':_0x5bbaf3(0x85),'ruleSet':{'geosite':_0x5bbaf3(0xa7),'geoip':'geoip-malware','geositeURL':_0x5bbaf3(0xd7),'geoipURL':_0x5bbaf3(0xae)}},{'rule':!![],'type':_0x1b9b6e(0x17f),'ruleSet':{'geosite':'geosite-phishing','geoip':_0x5bbaf3(0x77),'geositeURL':_0x5bbaf3(0x88),'geoipURL':_0x5bbaf3(0x8f)}},{'rule':!![],'type':_0x5bbaf3(0x85),'ruleSet':{'geosite':_0x1b9b6e(0x1a0),'geositeURL':_0x5bbaf3(0xa6)}},{'rule':_0x43eaf2,'type':_0x1b9b6e(0x17f),'ruleSet':{'geosite':_0x5bbaf3(0xf0),'geositeURL':_0x5bbaf3(0x92)}},{'rule':_0x1ba404,'type':_0x5bbaf3(0x85),'ruleSet':{'geosite':_0x5bbaf3(0x93),'geositeURL':_0x5bbaf3(0xa8)}}],_0x216a5c=[],_0x3f48ce=[],_0x580401=[],_0x30e35f=[],_0x1614db=[];_0x4186ba&&_0x3f48ce[_0x5bbaf3(0xc8)]({'ip_is_private':!![],'outbound':'direct'});const _0x50dc68=(_0x52e898,_0x4122d8)=>({[_0x52e898]:[],'outbound':_0x4122d8}),_0x528096={'type':_0x5bbaf3(0xde),'tag':'','format':_0x5bbaf3(0xc0),'url':'','download_detour':_0x5bbaf3(0xa9)},_0x17b8b0=_0x50dc68(_0x5bbaf3(0xd8),_0x5bbaf3(0xa9));;const _0x1bbc1f=_0x50dc68('rule_set',_0x5bbaf3(0xa9));;const _0x130bb6=_0x50dc68(_0x5bbaf3(0xd8),_0x5bbaf3(0x85)),_0x4ed71c=_0x50dc68(_0x5bbaf3(0xd8),_0x5bbaf3(0x85));_0x268c28[_0x5bbaf3(0xfb)](({rule:_0xe8d3cf,type:_0xb14a6f,ruleSet:_0x5f34f0})=>{const _0x6ff6d4=_0x1b9b6e,_0x3648be=_0x5bbaf3;if(!_0xe8d3cf)return;const {geosite:_0xcade66,geoip:_0xf66959,geositeURL:_0x18b15c,geoipURL:_0x22c4b7}=_0x5f34f0,_0x1b2f6f=_0xb14a6f===_0x6ff6d4(0x179),_0x2bc3a6=_0x1b2f6f?_0x17b8b0:_0x130bb6,_0x3b91ed=_0x1b2f6f?_0x1bbc1f:_0x4ed71c;_0x2bc3a6[_0x3648be(0xd8)][_0x3648be(0xc8)](_0xcade66),_0x1614db[_0x3648be(0xc8)]({..._0x528096,'tag':_0xcade66,'url':_0x18b15c}),_0xf66959&&(_0x3b91ed[_0x3648be(0xd8)][_0x3648be(0xc8)](_0xf66959),_0x1614db['push']({..._0x528096,'tag':_0xf66959,'url':_0x22c4b7}));});const _0x2e35e1=(_0x170228,_0x446f6a)=>{const _0x2eb2d0=_0x1b9b6e,_0x56aae0=_0x5bbaf3;(_0x170228[_0x2eb2d0(0x146)]?.[_0x56aae0(0xf5)]||_0x170228[_0x56aae0(0xd5)]?.[_0x56aae0(0xf5)]||_0x170228[_0x56aae0(0x96)]?.[_0x56aae0(0xf5)])&&_0x446f6a[_0x2eb2d0(0x158)](_0x170228);};_0x2e35e1(_0x17b8b0,_0x216a5c),_0x2e35e1(_0x1bbc1f,_0x3f48ce),_0x2e35e1(_0x130bb6,_0x580401),_0x2e35e1(_0x4ed71c,_0x30e35f);const _0x2938fa=(_0xaf71b4,_0x19ac07)=>{const _0x2de6b5=_0x1b9b6e,_0x40bf40=_0x5bbaf3,_0x313b7e=_0x50dc68(_0x40bf40(0xd5),_0x19ac07),_0x4ea0c4=_0x50dc68(_0x40bf40(0x96),_0x19ac07);_0xaf71b4[_0x40bf40(0xfb)](_0x367657=>{const _0xfa713e=a0_0x432d,_0x40a382=_0x40bf40;if(isDomain(_0x367657))_0x313b7e[_0xfa713e(0x174)][_0x40a382(0xc8)](_0x367657);else{const _0x1712e5=isIPv6(_0x367657)?_0x367657[_0x40a382(0x82)](/\[|\]/g,''):_0x367657;_0x4ea0c4[_0xfa713e(0x177)][_0x40a382(0xc8)](_0x1712e5);}}),_0x2e35e1(_0x313b7e,_0x19ac07===_0x40bf40(0xa9)?_0x216a5c:_0x580401),_0x2e35e1(_0x4ea0c4,_0x19ac07===_0x2de6b5(0x179)?_0x3f48ce:_0x30e35f);};_0x6e15c5[_0x5bbaf3(0xf5)]&&_0x2938fa(_0x6e15c5,_0x5bbaf3(0xa9)),_0x384ef6[_0x5bbaf3(0xf5)]&&_0x2938fa(_0x384ef6,_0x5bbaf3(0x85));const _0x30366b=[..._0x7ccbd4,..._0x216a5c,..._0x3f48ce,..._0x580401,..._0x30e35f];return _0x41ebd9&&_0x30366b[_0x5bbaf3(0xc8)]({'network':_0x1b9b6e(0x185),'port':0x1bb,'protocol':_0x5bbaf3(0xd9),'outbound':_0x1b9b6e(0x17f)}),{'rules':_0x30366b,'rule_set':_0x1614db};}function buildSingBoxVLESSOutbound(_0x3435f3,_0xa3f8e7,_0x4348e1,_0x32dda0,_0x5dbf27,_0x2aa444,_0xbe7c85,_0x3a7c0e){const _0x58f321=a0_0x432d,_0x1f2c9c=a0_0xdceb,{enableIPv6:_0x3013dc,lengthMin:_0x40312c,lengthMax:_0x433ea4,intervalMin:_0x7f3b8,intervalMax:_0x546317,proxyIP:_0x5ebb70}=_0x3435f3,_0xfc9ddc='/'+getRandomPath(0x10)+(_0x5ebb70?'/'+btoa(_0x5ebb70):''),_0x121934=globalThis[_0x1f2c9c(0xf3)][_0x1f2c9c(0x99)](_0x32dda0)?!![]:![],_0xf47380={'type':_0x1f2c9c(0xc5),'server':_0x4348e1,'server_port':+_0x32dda0,'domain_strategy':_0x3013dc?_0x1f2c9c(0xc4):_0x58f321(0x1ae),'uuid':globalThis[_0x58f321(0x17b)],'tls':{'alpn':_0x1f2c9c(0xb7),'enabled':!![],'insecure':_0xbe7c85,'server_name':_0x2aa444,'utls':{'enabled':!![],'fingerprint':_0x1f2c9c(0x87)}},'transport':{'early_data_header_name':_0x58f321(0x17c),'max_early_data':0xa00,'headers':{'Host':_0x5dbf27},'path':_0xfc9ddc,'type':'ws'},'tag':_0xa3f8e7};if(!_0x121934)delete _0xf47380[_0x1f2c9c(0x8c)];if(_0x3a7c0e)_0xf47380[_0x1f2c9c(0xb3)]={'enabled':!![],'size':_0x40312c+'-'+_0x433ea4,'sleep':_0x7f3b8+'-'+_0x546317};return _0xf47380;}function buildSingBoxTrojanOutbound(_0x2053c4,_0x1fa720,_0x441d48,_0x1dd913,_0x33e968,_0x54c1b1,_0x4fa998,_0x24f30c){const _0x123e8d=a0_0x432d,_0x4ad681=a0_0xdceb,{enableIPv6:_0x305064,lengthMin:_0x56ca54,lengthMax:_0x6feb3f,intervalMin:_0xe48eb4,intervalMax:_0x1f703a,proxyIP:_0x57d64e}=_0x2053c4,_0x3a97b6=_0x4ad681(0x74)+getRandomPath(0x10)+(_0x57d64e?'/'+btoa(_0x57d64e):''),_0x2cf6bf=globalThis[_0x4ad681(0xf3)][_0x4ad681(0x99)](_0x1dd913)?!![]:![],_0xda62a2={'type':_0x4ad681(0xe9),'password':globalThis[_0x4ad681(0x73)],'server':_0x441d48,'server_port':+_0x1dd913,'domain_strategy':_0x305064?_0x123e8d(0x145):_0x4ad681(0x7d),'tls':{'alpn':_0x4ad681(0xb7),'enabled':!![],'insecure':_0x4fa998,'server_name':_0x54c1b1,'utls':{'enabled':!![],'fingerprint':_0x4ad681(0x87)}},'transport':{'early_data_header_name':_0x4ad681(0xf1),'max_early_data':0xa00,'headers':{'Host':_0x33e968},'path':_0x3a97b6,'type':'ws'},'tag':_0x1fa720};if(!_0x2cf6bf)delete _0xda62a2[_0x4ad681(0x8c)];if(_0x24f30c)_0xda62a2[_0x4ad681(0xb3)]={'enabled':!![],'size':_0x56ca54+'-'+_0x6feb3f,'sleep':_0xe48eb4+'-'+_0x1f703a};return _0xda62a2;}function buildSingBoxWarpOutbound(_0x4412be,_0x41d3e3,_0x6e1ee3,_0x21c8fb,_0x5de7f7,_0x28ea9c){const _0x3b97cd=a0_0x432d,_0x5a86a8=a0_0xdceb,_0x4a2f4b=/\[(.*?)\]/,_0x143a5c=/[^:]*$/,_0xc40142=_0x21c8fb[_0x5a86a8(0x99)]('[')?_0x21c8fb[_0x5a86a8(0xe5)](_0x4a2f4b)[0x1]:_0x21c8fb[_0x5a86a8(0xac)](':')[0x0],_0x110d99=_0x21c8fb[_0x5a86a8(0x99)]('[')?+_0x21c8fb[_0x5a86a8(0xe5)](_0x143a5c)[0x0]:+_0x21c8fb[_0x5a86a8(0xac)](':')[0x1],{warpEnableIPv6:_0x49191c,hiddifyNoiseMode:_0x25e834,noiseCountMin:_0x468581,noiseCountMax:_0x5b90f8,noiseSizeMin:_0x55ea85,noiseSizeMax:_0x5569e4,noiseDelayMin:_0x3cf6c0,noiseDelayMax:_0x23ea2b}=_0x4412be,{warpIPv6:_0x52b0c5,reserved:_0x459308,publicKey:_0x1bad1e,privateKey:_0x3ce0fc}=extractWireguardParams(_0x41d3e3,_0x5de7f7),_0x5cbf3f={'local_address':[_0x3b97cd(0x18e),_0x52b0c5],'mtu':0x500,'peer_public_key':_0x1bad1e,'private_key':_0x3ce0fc,'reserved':_0x459308,'server':_0xc40142,'server_port':_0x110d99,'domain_strategy':_0x49191c?_0x5a86a8(0xc4):_0x5a86a8(0x7d),'type':_0x5a86a8(0xbe),'detour':_0x5de7f7,'tag':_0x6e1ee3};return _0x28ea9c==='hiddify'&&Object[_0x5a86a8(0xf4)](_0x5cbf3f,{'fake_packets_mode':_0x25e834,'fake_packets':_0x468581===_0x5b90f8?_0x468581:_0x468581+'-'+_0x5b90f8,'fake_packets_size':_0x55ea85===_0x5569e4?_0x55ea85:_0x55ea85+'-'+_0x5569e4,'fake_packets_delay':_0x3cf6c0===_0x23ea2b?_0x3cf6c0:_0x3cf6c0+'-'+_0x23ea2b}),_0x5cbf3f;}function buildSingBoxChainOutbound(_0x103201,_0x5df350){const _0x5387d7=a0_0x432d,_0x26434e=a0_0xdceb;if([_0x26434e(0xb9),_0x26434e(0xe7)][_0x26434e(0x99)](_0x103201[_0x26434e(0xbc)])){const {protocol:_0x26ca75,server:_0x10d8f6,port:_0x185604,user:_0x55a990,pass:_0x326161}=_0x103201,_0x7d971={'type':_0x26ca75,'tag':'','server':_0x10d8f6,'server_port':+_0x185604,'username':_0x55a990,'password':_0x326161,'detour':''};if(_0x26ca75===_0x5387d7(0x1b8))_0x7d971[_0x26434e(0xd6)]='5';return _0x7d971;}const {server:_0x5e0733,port:_0x4180c1,uuid:_0x51e1c9,flow:_0x1a3885,security:_0x45afd1,type:_0x26eff5,sni:_0x43e6ff,fp:_0x34ec25,alpn:_0x22fede,pbk:_0x12330b,sid:_0xfcbc5a,headerType:_0xce62c4,host:_0x5bbcd7,path:_0x35d60d,serviceName:_0xc59445}=_0x103201,_0x5b2f4e={'type':_0x26434e(0xc5),'tag':'','server':_0x5e0733,'server_port':+_0x4180c1,'domain_strategy':_0x5df350?_0x26434e(0xc4):_0x26434e(0x7d),'uuid':_0x51e1c9,'flow':_0x1a3885,'detour':''};if(_0x45afd1===_0x26434e(0x8c)||_0x45afd1===_0x5387d7(0x197)){const _0x1d72e3=_0x22fede?_0x22fede?.[_0x26434e(0xac)](',')[_0x5387d7(0x155)](_0x2d51f7=>_0x2d51f7!=='h2'):[];_0x5b2f4e[_0x5387d7(0x159)]={'enabled':!![],'server_name':_0x43e6ff,'insecure':![],'alpn':_0x1d72e3,'utls':{'enabled':!![],'fingerprint':_0x34ec25}},_0x45afd1===_0x26434e(0xe4)&&(_0x5b2f4e[_0x26434e(0x8c)][_0x26434e(0xe4)]={'enabled':!![],'public_key':_0x12330b,'short_id':_0xfcbc5a},delete _0x5b2f4e['tls'][_0x26434e(0xed)]);}if(_0xce62c4===_0x26434e(0xe7)){const _0x5c1fb2=_0x5bbcd7?.[_0x5387d7(0x19f)](',');_0x5b2f4e[_0x26434e(0xc9)]={'type':_0x26434e(0xe7),'host':_0x5c1fb2,'path':_0x35d60d,'method':_0x26434e(0xc6),'headers':{'Connection':[_0x5387d7(0x17a)],'Content-Type':['application/octet-stream']}};}if(_0x26eff5==='ws'){const _0x1056b4=_0x35d60d?.[_0x26434e(0xac)]('?ed=')[0x0],_0x34f1a5=+_0x35d60d?.[_0x26434e(0xac)](_0x26434e(0xeb))[0x1]||0x0;_0x5b2f4e[_0x26434e(0xc9)]={'type':'ws','path':_0x1056b4,'headers':{'Host':_0x5bbcd7},'max_early_data':_0x34f1a5,'early_data_header_name':_0x26434e(0xf1)};}if(_0x26eff5===_0x5387d7(0x15e))_0x5b2f4e[_0x26434e(0xc9)]={'type':_0x26434e(0xaa),'service_name':_0xc59445};return _0x5b2f4e;}export async function getSingBoxWarpConfig(_0x233ee9,_0x3fe8c5,_0xf9a868){const _0x4ac96f=a0_0x432d,_0x5c2eb2=a0_0xdceb,{proxySettings:_0x50293d,warpConfigs:_0x310342}=await getDataset(_0x233ee9,_0x3fe8c5),{warpEndpoints:_0x5a857d}=_0x50293d,_0x3ff1e7=structuredClone(singboxConfigTemp),_0xc169cc=_0xf9a868===_0x5c2eb2(0xe3)?_0x5c2eb2(0xab):'\x20',_0x38ba51=buildSingBoxDNS(_0x50293d,undefined,!![],_0x5c2eb2(0xcd)+_0xc169cc+_0x5c2eb2(0xf2)),{rules:_0x3a1cdc,rule_set:_0x5e307d}=buildSingBoxRoutingRules(_0x50293d);_0x3ff1e7[_0x5c2eb2(0xef)][_0x5c2eb2(0xb8)]=_0x38ba51['servers'],_0x3ff1e7[_0x5c2eb2(0xef)][_0x5c2eb2(0xa5)]=_0x38ba51[_0x5c2eb2(0xa5)];if(_0x38ba51[_0x5c2eb2(0xc2)])_0x3ff1e7[_0x5c2eb2(0xef)][_0x5c2eb2(0xc2)]=_0x38ba51[_0x4ac96f(0x18c)];_0x3ff1e7[_0x5c2eb2(0x95)][_0x4ac96f(0x187)]=_0x3a1cdc,_0x3ff1e7[_0x5c2eb2(0x95)][_0x5c2eb2(0xd8)]=_0x5e307d;const _0x19e9d9=_0x3ff1e7[_0x5c2eb2(0xb0)][0x0],_0x2ce98d=_0x3ff1e7[_0x5c2eb2(0xb0)][0x1];_0x19e9d9[_0x5c2eb2(0xb0)]=[_0x5c2eb2(0xcd)+_0xc169cc+_0x5c2eb2(0xf2),_0x5c2eb2(0x7f)+_0xc169cc+'-\x20Best\x20Ping\x20🚀'],_0x3ff1e7[_0x5c2eb2(0xb0)][_0x5c2eb2(0xda)](0x2,0x0,structuredClone(_0x2ce98d));const _0x9012a4=_0x3ff1e7[_0x5c2eb2(0xb0)][0x2];_0x2ce98d[_0x4ac96f(0x15c)]=_0x5c2eb2(0xcd)+_0xc169cc+_0x5c2eb2(0xf2),_0x2ce98d[_0x5c2eb2(0xcf)]=_0x50293d[_0x4ac96f(0x164)]+'s',_0x9012a4[_0x5c2eb2(0xba)]=_0x5c2eb2(0x7f)+_0xc169cc+_0x5c2eb2(0xf2),_0x9012a4[_0x5c2eb2(0xcf)]=_0x50293d[_0x5c2eb2(0x8a)]+'s';const _0x80b1f2=[],_0xba29ff=[];return _0x5a857d[_0x4ac96f(0x19f)](',')[_0x5c2eb2(0xfb)]((_0x279779,_0x1786fa)=>{const _0x189b4b=_0x4ac96f,_0x94d930=_0x5c2eb2,_0x1e550f=_0x94d930(0xfc)+(_0x1786fa+0x1)+_0x94d930(0xb5),_0x525963=_0x189b4b(0x144)+(_0x1786fa+0x1)+_0x94d930(0xa0),_0x9f6d00=buildSingBoxWarpOutbound(_0x50293d,_0x310342,_0x1e550f,_0x279779,'',_0xf9a868),_0x4ab923=buildSingBoxWarpOutbound(_0x50293d,_0x310342,_0x525963,_0x279779,_0x1e550f,_0xf9a868);_0x3ff1e7[_0x94d930(0xb0)][_0x94d930(0xc8)](_0x4ab923,_0x9f6d00),_0x80b1f2[_0x94d930(0xc8)](_0x1e550f),_0xba29ff[_0x94d930(0xc8)](_0x525963),_0x2ce98d['outbounds'][_0x94d930(0xc8)](_0x1e550f),_0x9012a4[_0x94d930(0xb0)][_0x189b4b(0x158)](_0x525963);}),_0x19e9d9[_0x5c2eb2(0xb0)][_0x5c2eb2(0xc8)](..._0x80b1f2,..._0xba29ff),new Response(JSON[_0x5c2eb2(0x97)](_0x3ff1e7,null,0x4),{'status':0xc8,'headers':{'Content-Type':_0x5c2eb2(0xe6),'Cache-Control':_0x5c2eb2(0x89),'CDN-Cache-Control':_0x5c2eb2(0xbd)}});}function a0_0x382a(){const _0xc045b2=['dns-out','block','proxySettings','https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geosite-phishing.srs','16051210rHRGNG','127.0.0.1:9090','1.1.1.1','udp','geosite-cn','rules','length','1746ZhskwZ','http/1.1','💦\x20Best\x20Ping\x20💥','fakeip','An\x20error\x20occured\x20while\x20parsing\x20chain\x20proxy:\x20','172.16.0.2/32','forEach','detour','replace','includes','match','no-store,\x20no-cache,\x20must-revalidate,\x20proxy-revalidate','logical','geosite-nsfw','reality','198.18.0.0/15','protocol','172.18.0.1/28','geosite-phishing','fc00::/18','outbounds','152iMVrJV','split','geosite-cryptominers','quic','mixed-in','log','warn','interval','dns-direct','967470WtgXRA','https://raw.githubusercontent.com/SagerNet/sing-geoip/rule-set/geoip-cn.srs','tun','https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geosite-category-ads-all.srs','https://raw.githubusercontent.com/SagerNet/sing-geoip/rule-set/geoip-ru.srs','shift','dns','ipv4_only','https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geosite-malware.srs','rcode://success','proxy-','24744gzPyrx','33WUqDsI','1930854JTCiLq','stringify','https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geosite-cryptominers.srs','30m','socks','0.0.0.0','/tr','geosite-category-ads-all','https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geosite-nsfw.srs','urltest','bpb','no-store','defaultHttpsPorts','AAAA','💦\x20Warp','parse','assign','hiddify','dns-remote','https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geoip-malware.srs','Global','30692dIkMFM','💦\x20','prefer_ipv4','rule_set','proxy-1','GET','version','randomized','231174OwvOst','vless','geosite-malware','geosite-ir','-\x20Best\x20Ping\x20🚀','899116zOqEXe','6759ohOdjb','trojan','servers','https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geosite-ir.srs','filter','?ed=','https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-cn.srs','push','tls','594916jewCxB','tun-in','tag','selector','grpc','text/plain;charset=utf-8','hostName','642592CkIQTj','Direct','\x20-\x20Warp\x20🇮🇷','bestWarpInterval','5FmKlzU','geosite-category-ru','and','113961kgdtbE','\x20Pro\x20','522HQneAE','geoip-cn','Rule','29ZFQkSq','dns-in','wireguard','Trojan','http','any','inet6_range','domain_suffix','splice','172Gvglgj','ip_cidr','✅\x20Selector','direct','keep-alive','userID','Sec-WebSocket-Protocol','💦\x20WoW'];a0_0x382a=function(){return _0xc045b2;};return a0_0x382a();}export async function getSingBoxCustomConfig(_0x3e2fba,_0x508d08,_0x1a7662){const _0x1342b6=a0_0x432d,_0x189893=a0_0xdceb,{proxySettings:_0x2f3ee5}=await getDataset(_0x3e2fba,_0x508d08);let _0x31d1be;const {cleanIPs:_0x28f015,ports:_0x1b02e2,vlessConfigs:_0x2ef7fa,trojanConfigs:_0x47f660,outProxy:_0x1dc694,outProxyParams:_0x1afa1b,customCdnAddrs:_0x3aa38a,customCdnHost:_0x4e662c,customCdnSni:_0x5d64c2,bestVLESSTrojanInterval:_0x28ccf0,enableIPv6:_0x3205e3}=_0x2f3ee5;if(_0x1dc694){const _0x41e42=JSON[_0x1342b6(0x13d)](_0x1afa1b);try{_0x31d1be=buildSingBoxChainOutbound(_0x41e42,_0x3205e3);}catch(_0x5c72fe){console[_0x189893(0xb6)](_0x1342b6(0x18d),_0x5c72fe),_0x31d1be=undefined,await _0x508d08[_0x189893(0x9b)]['put'](_0x189893(0xa1),JSON[_0x189893(0x97)]({..._0x2f3ee5,'outProxy':'','outProxyParams':{}}));}}const _0x369f50=await getConfigAddresses(_0x28f015,_0x3205e3),_0x22e279=_0x3aa38a?_0x3aa38a[_0x189893(0xac)](','):[],_0x4cd783=[..._0x369f50,..._0x22e279],_0x1fcfa4=structuredClone(singboxConfigTemp),_0xaebe4f=buildSingBoxDNS(_0x2f3ee5,_0x4cd783,![],_0x31d1be?_0x189893(0xcc):_0x189893(0xa4)),{rules:_0x1644e7,rule_set:_0x389a0b}=buildSingBoxRoutingRules(_0x2f3ee5);_0x1fcfa4[_0x189893(0xef)][_0x1342b6(0x153)]=_0xaebe4f[_0x1342b6(0x153)],_0x1fcfa4[_0x189893(0xef)]['rules']=_0xaebe4f[_0x1342b6(0x187)];if(_0xaebe4f[_0x1342b6(0x18c)])_0x1fcfa4[_0x1342b6(0x1ad)][_0x189893(0xc2)]=_0xaebe4f[_0x189893(0xc2)];_0x1fcfa4[_0x189893(0x95)][_0x189893(0xa5)]=_0x1644e7,_0x1fcfa4[_0x189893(0x95)][_0x189893(0xd8)]=_0x389a0b;const _0x38fa98=_0x1fcfa4[_0x189893(0xb0)][0x0],_0x1bacac=_0x1fcfa4[_0x1342b6(0x19d)][0x1];_0x38fa98[_0x189893(0xb0)]=[_0x1342b6(0x18b)],_0x1bacac[_0x1342b6(0x1a5)]=_0x28ccf0+'s',_0x1bacac[_0x1342b6(0x15c)]=_0x1342b6(0x18b);const _0x3a6e96=_0x1b02e2[_0x189893(0x98)](_0x2863de=>_0x1a7662?globalThis[_0x189893(0xf3)][_0x189893(0x99)](_0x2863de):!![]);let _0x269caa=0x1;const _0x4e4bfb=[..._0x2ef7fa?[_0x189893(0xce)]:[],..._0x47f660?[_0x189893(0xe1)]:[]];return _0x4e4bfb[_0x189893(0xfb)](_0x4e0248=>{const _0x5b2eb0=_0x189893;let _0x4939c2=0x1;_0x3a6e96[_0x5b2eb0(0xfb)](_0x2a57ab=>{const _0x5278b7=_0x5b2eb0;_0x4cd783[_0x5278b7(0xfb)](_0x4739cc=>{const _0x48b217=a0_0x432d,_0x330342=_0x5278b7;let _0x2ee95b,_0x2d0a25;const _0x42df94=_0x22e279[_0x48b217(0x192)](_0x4739cc),_0x4d712c=_0x42df94?'C':_0x1a7662?'F':'',_0x5d4202=_0x42df94?_0x5d64c2:randomUpperCase(globalThis[_0x330342(0xb4)]),_0x42b6d8=_0x42df94?_0x4e662c:globalThis[_0x330342(0xb4)],_0x2ae826=generateRemark(_0x4939c2,_0x2a57ab,_0x4739cc,_0x28f015,_0x4e0248,_0x4d712c);_0x4e0248===_0x330342(0xce)&&(_0x2ee95b=buildSingBoxVLESSOutbound(_0x2f3ee5,_0x31d1be?_0x48b217(0x1b1)+_0x269caa:_0x2ae826,_0x4739cc,_0x2a57ab,_0x42b6d8,_0x5d4202,_0x42df94,_0x1a7662),_0x1fcfa4[_0x48b217(0x19d)][_0x330342(0xc8)](_0x2ee95b)),_0x4e0248===_0x330342(0xe1)&&(_0x2d0a25=buildSingBoxTrojanOutbound(_0x2f3ee5,_0x31d1be?'proxy-'+_0x269caa:_0x2ae826,_0x4739cc,_0x2a57ab,_0x42b6d8,_0x5d4202,_0x42df94,_0x1a7662),_0x1fcfa4[_0x330342(0xb0)][_0x330342(0xc8)](_0x2d0a25));if(_0x31d1be){const _0x4d28a4=structuredClone(_0x31d1be);_0x4d28a4[_0x330342(0xba)]=_0x2ae826,_0x4d28a4[_0x330342(0x90)]=_0x330342(0x94)+_0x269caa,_0x1fcfa4[_0x330342(0xb0)][_0x48b217(0x158)](_0x4d28a4);}_0x38fa98[_0x330342(0xb0)][_0x330342(0xc8)](_0x2ae826),_0x1bacac[_0x330342(0xb0)][_0x330342(0xc8)](_0x2ae826),_0x269caa++,_0x4939c2++;});});}),new Response(JSON[_0x189893(0x97)](_0x1fcfa4,null,0x4),{'status':0xc8,'headers':{'Content-Type':_0x189893(0xe6),'Cache-Control':_0x189893(0x89),'CDN-Cache-Control':_0x189893(0xbd)}});}function a0_0x432d(_0x41616f,_0x306389){const _0x382a0f=a0_0x382a();return a0_0x432d=function(_0x432d59,_0x4c4839){_0x432d59=_0x432d59-0x138;let _0x5afa97=_0x382a0f[_0x432d59];return _0x5afa97;},a0_0x432d(_0x41616f,_0x306389);}const singboxConfigTemp={'log':{'level':a0_0x5ee952(0x7b),'timestamp':!![]},'dns':{'servers':[],'rules':[],'independent_cache':!![]},'inbounds':[{'type':a0_0x5ee952(0xa9),'tag':a0_0x5ee952(0x91),'listen':a0_0x5ee952(0x78),'listen_port':0x1932,'override_address':a0_0x230cc9(0x184),'override_port':0x35},{'type':a0_0x5ee952(0x7a),'tag':a0_0x230cc9(0x15b),'address':[a0_0x5ee952(0xca),a0_0x5ee952(0xd2)],'mtu':0x2328,'auto_route':!![],'strict_route':!![],'stack':a0_0x5ee952(0x81),'endpoint_independent_nat':!![],'sniff':!![],'sniff_override_destination':!![]},{'type':a0_0x5ee952(0x81),'tag':a0_0x5ee952(0x75),'listen':a0_0x5ee952(0x78),'listen_port':0x820,'sniff':!![],'sniff_override_destination':![]}],'outbounds':[{'type':a0_0x5ee952(0x79),'tag':a0_0x5ee952(0xa4),'outbounds':[]},{'type':a0_0x5ee952(0x7e),'tag':'','outbounds':[],'url':a0_0x5ee952(0x80),'interval':''},{'type':a0_0x5ee952(0xa9),'tag':a0_0x230cc9(0x179)},{'type':a0_0x230cc9(0x17f),'tag':a0_0x5ee952(0x85)},{'type':a0_0x5ee952(0xef),'tag':a0_0x230cc9(0x17e)}],'route':{'rules':[],'rule_set':[],'auto_detect_interface':!![],'override_android_vpn':!![],'final':a0_0x5ee952(0xa4)},'ntp':{'enabled':!![],'server':a0_0x5ee952(0xad),'server_port':0x7b,'detour':a0_0x5ee952(0xa9),'interval':a0_0x5ee952(0xfa)},'experimental':{'cache_file':{'enabled':!![],'store_fakeip':!![]},'clash_api':{'external_controller':a0_0x5ee952(0xaf),'external_ui':'ui','external_ui_download_url':a0_0x5ee952(0xb2),'external_ui_download_detour':a0_0x5ee952(0xa9),'default_mode':a0_0x230cc9(0x16c)}}};